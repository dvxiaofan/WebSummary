/*
 * =====================================================
 * light7 V0.4.3 - http://light7.org/
 *
 * =====================================================
 */
+function(a){var b={autoInit:false,showPageLoadingIndicator:true,router:true,swipePanel:"left",swipePanelOnlyClose:false,pushAnimationDuration:400};a.smConfig=a.extend(b,a.config)}($);(function(a){var d={};var l=navigator.userAgent;var b=l.match(/(Android);?[\s\/]+([\d.]+)?/);var f=l.match(/(iPad).*OS\s([\d_]+)/);var h=l.match(/(iPod)(.*OS\s([\d_]+))?/);var g=!f&&l.match(/(iPhone\sOS)\s([\d_]+)/);d.ios=d.android=d.iphone=d.ipad=d.androidChrome=false;if(b){d.os="android";d.osVersion=b[2];d.android=true;d.androidChrome=l.toLowerCase().indexOf("chrome")>=0}if(f||g||h){d.os="ios";d.ios=true}if(g&&!h){d.osVersion=g[2].replace(/_/g,".");d.iphone=true}if(f){d.osVersion=f[2].replace(/_/g,".");d.ipad=true}if(h){d.osVersion=h[3]?h[3].replace(/_/g,"."):null;d.iphone=true}if(d.ios&&d.osVersion&&l.indexOf("Version/")>=0){if(d.osVersion.split(".")[0]==="10"){d.osVersion=l.toLowerCase().split("version/")[1].split(" ")[0]}}d.webView=(g||f||h)&&l.match(/.*AppleWebKit(?!.*Safari)/i);if(d.os&&d.os==="ios"){var k=d.osVersion.split(".");d.minimalUi=!d.webView&&(h||g)&&(k[0]*1===7?k[1]*1>=1:k[0]*1>7)&&a('meta[name="viewport"]').length>0&&a('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var n=a(window).width();var m=a(window).height();d.statusBar=false;if(d.webView&&(n*m===screen.width*screen.height)){d.statusBar=true}else{d.statusBar=false}var c=[];d.pixelRatio=window.devicePixelRatio||1;c.push("pixel-ratio-"+Math.floor(d.pixelRatio));if(d.pixelRatio>=2){c.push("retina")}if(d.os){c.push(d.os,d.os+"-"+d.osVersion.split(".")[0],d.os+"-"+d.osVersion.replace(/\./g,"-"));if(d.os==="ios"){var j=parseInt(d.osVersion.split(".")[0],10);for(var e=j-1;e>=6;e--){c.push("ios-gt-"+e)}}}if(d.statusBar){c.push("with-statusbar-overlay")}else{a("html").removeClass("with-statusbar-overlay")}if(c.length>0){a("html").addClass(c.join(" "))}a.device=d})($);+function(a){a.compareVersion=function(c,e){var d=c.split(".");var f=e.split(".");if(c===e){return 0}for(var g=0;g<d.length;g++){var h=parseInt(d[g]);if(!f[g]){return 1}var j=parseInt(f[g]);if(h<j){return -1}if(h>j){return 1}}return 1};a.getTouchPosition=function(b){b=b.originalEvent||b;if(b.type==="touchstart"||b.type==="touchmove"||b.type==="touchend"){return{x:b.targetTouches[0].pageX,y:b.targetTouches[0].pageY}}else{return{x:b.pageX,y:b.pageY}}}}($);+function(a){function b(w,q){var o=this.os={},f=this.browser={},x=w.match(/Web[kK]it[\/]{0,1}([\d.]+)/),c=w.match(/(Android);?[\s\/]+([\d.]+)?/),p=!!w.match(/\(Macintosh\; Intel /),k=w.match(/(iPad).*OS\s([\d_]+)/),m=w.match(/(iPod)(.*OS\s([\d_]+))?/),l=!k&&w.match(/(iPhone\sOS)\s([\d_]+)/),y=w.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),A=/Win\d{2}|Windows/.test(q),B=w.match(/Windows Phone ([\d.]+)/),v=y&&w.match(/TouchPad/),n=w.match(/Kindle\/([\d.]+)/),u=w.match(/Silk\/([\d._]+)/),e=w.match(/(BlackBerry).*Version\/([\d.]+)/),d=w.match(/(BB10).*Version\/([\d.]+)/),s=w.match(/(RIM\sTablet\sOS)\s([\d.]+)/),r=w.match(/PlayBook/),g=w.match(/Chrome\/([\d.]+)/)||w.match(/CriOS\/([\d.]+)/),h=w.match(/Firefox\/([\d.]+)/),i=w.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),j=w.match(/MSIE\s([\d.]+)/)||w.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),z=!g&&w.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),t=z||w.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if(f.webkit=!!x){f.version=x[1]}if(c){o.android=true,o.version=c[2]}if(l&&!m){o.ios=o.iphone=true,o.version=l[2].replace(/_/g,".")}if(k){o.ios=o.ipad=true,o.version=k[2].replace(/_/g,".")}if(m){o.ios=o.ipod=true,o.version=m[3]?m[3].replace(/_/g,"."):null}if(B){o.wp=true,o.version=B[1]}if(y){o.webos=true,o.version=y[2]}if(v){o.touchpad=true}if(e){o.blackberry=true,o.version=e[2]}if(d){o.bb10=true,o.version=d[2]}if(s){o.rimtabletos=true,o.version=s[2]}if(r){f.playbook=true}if(n){o.kindle=true,o.version=n[1]}if(u){f.silk=true,f.version=u[1]}if(!u&&o.android&&w.match(/Kindle Fire/)){f.silk=true}if(g){f.chrome=true,f.version=g[1]}if(h){f.firefox=true,f.version=h[1]}if(i){o.firefoxos=true,o.version=i[1]}if(j){f.ie=true,f.version=j[1]}if(t&&(p||o.ios||A)){f.safari=true;if(!o.ios){f.version=t[1]}}if(z){f.webview=true}o.tablet=!!(k||r||(c&&!w.match(/Mobile/))||(h&&w.match(/Tablet/))||(j&&!w.match(/Phone/)&&w.match(/Touch/)));o.phone=!!(!o.tablet&&!o.ipod&&(c||l||y||e||d||(g&&w.match(/Android/))||(g&&w.match(/CriOS\/([\d.]+)/))||(h&&w.match(/Mobile/))||(j&&w.match(/Touch/))))}b.call(a,navigator.userAgent,navigator.platform);a.__detect=b}($);(function(a){["width","height"].forEach(function(b){var c=b.replace(/./,function(d){return d[0].toUpperCase()});a.fn["outer"+c]=function(e){var d=this;if(d){var g=d[b]();var f={width:["left","right"],height:["top","bottom"]};f[b].forEach(function(h){if(e){g+=parseInt(d.css("margin-"+h),10)}});return g}else{return null}}});a.noop=function(){};a.support=(function(){var b={touch:!!(("ontouchstart" in window)||window.DocumentTouch&&document instanceof window.DocumentTouch)};return b})();a.touchEvents={start:a.support.touch?"touchstart":"mousedown",move:a.support.touch?"touchmove":"mousemove",end:a.support.touch?"touchend":"mouseup"};a.getTranslate=function(e,b){var f,d,c,g;if(typeof b==="undefined"){b="x"}c=window.getComputedStyle(e,null);if(window.WebKitCSSMatrix){g=new WebKitCSSMatrix(c.webkitTransform==="none"?"":c.webkitTransform)}else{g=c.MozTransform||c.OTransform||c.MsTransform||c.msTransform||c.transform||c.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");f=g.toString().split(",")}if(b==="x"){if(window.WebKitCSSMatrix){d=g.m41}else{if(f.length===16){d=parseFloat(f[12])}else{d=parseFloat(f[4])}}}if(b==="y"){if(window.WebKitCSSMatrix){d=g.m42}else{if(f.length===16){d=parseFloat(f[13])}else{d=parseFloat(f[5])}}}return d||0};a.requestAnimationFrame=function(b){if(window.requestAnimationFrame){return window.requestAnimationFrame(b)}else{if(window.webkitRequestAnimationFrame){return window.webkitRequestAnimationFrame(b)}else{if(window.mozRequestAnimationFrame){return window.mozRequestAnimationFrame(b)}else{return window.setTimeout(b,1000/60)}}}};a.cancelAnimationFrame=function(b){if(window.cancelAnimationFrame){return window.cancelAnimationFrame(b)}else{if(window.webkitCancelAnimationFrame){return window.webkitCancelAnimationFrame(b)}else{if(window.mozCancelAnimationFrame){return window.mozCancelAnimationFrame(b)}else{return window.clearTimeout(b)}}}};a.fn.transitionEnd=function(b){var d=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],f,c=this;function e(g){if(g.target!==this){return}b.call(this,g);for(f=0;f<d.length;f++){c.off(d[f],e)}}if(b){for(f=0;f<d.length;f++){c.on(d[f],e)}}return this};a.fn.dataset=function(){var e=this[0];if(e){var d={};if(e.dataset){for(var c in e.dataset){d[c]=e.dataset[c]}}else{for(var f=0;f<e.attributes.length;f++){var b=e.attributes[f];if(b.name.indexOf("data-")>=0){d[a.toCamelCase(b.name.split("data-")[1])]=b.value}}}for(var g in d){if(d[g]==="false"){d[g]=false}else{if(d[g]==="true"){d[g]=true}else{if(parseFloat(d[g])===d[g]*1){d[g]=d[g]*1}}}}return d}else{return undefined}};a.fn.data=function(e,f){if(typeof f==="undefined"){if(this[0]&&this[0].getAttribute){var b=this[0].getAttribute("data-"+e);if(b){return b}else{if(this[0].smElementDataStorage&&(e in this[0].smElementDataStorage)){return this[0].smElementDataStorage[e]}else{return undefined}}}else{return undefined}}else{for(var d=0;d<this.length;d++){var c=this[d];if(!c.smElementDataStorage){c.smElementDataStorage={}}c.smElementDataStorage[e]=f}return this}};a.fn.animationEnd=function(b){var d=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],f,c=this;function e(g){b(g);for(f=0;f<d.length;f++){c.off(d[f],e)}}if(b){for(f=0;f<d.length;f++){c.on(d[f],e)}}return this};a.fn.transition=function(b){if(typeof b!=="string"){b=b+"ms"}for(var d=0;d<this.length;d++){var c=this[d].style;c.webkitTransitionDuration=c.MsTransitionDuration=c.msTransitionDuration=c.MozTransitionDuration=c.OTransitionDuration=c.transitionDuration=b}return this};a.fn.transform=function(d){for(var c=0;c<this.length;c++){var b=this[c].style;b.webkitTransform=b.MsTransform=b.msTransform=b.MozTransform=b.OTransform=b.transform=d}return this};a.fn.prevAll=function(e){var d=[];var b=this[0];if(!b){return a([])}while(b.previousElementSibling){var c=b.previousElementSibling;if(e){if(a(c).is(e)){d.push(c)}}else{d.push(c)}b=c}return a(d)};a.fn.nextAll=function(e){var d=[];var b=this[0];if(!b){return a([])}while(b.nextElementSibling){var c=b.nextElementSibling;if(e){if(a(c).is(e)){d.push(c)}}else{d.push(c)}b=c}return a(d)};a.fn.show=function(){var c={};function b(f){var e,d;if(!c[f]){e=document.createElement(f);document.body.appendChild(e);d=getComputedStyle(e,"").getPropertyValue("display");e.parentNode.removeChild(e);d==="none"&&(d="block");c[f]=d}return c[f]}return this.each(function(){this.style.display==="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")==="none"){}this.style.display=b(this.nodeName)})};a.fn.scrollHeight=function(){return this[0].scrollHeight}})($);(function(a){function h(o,r){var q;r=r||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=r.touchBoundary||10;this.layer=o;this.tapDelay=r.tapDelay||200;this.tapTimeout=r.tapTimeout||700;if(h.notNeeded(o)){return}function j(l,i){return function(){return l.apply(i,arguments)}}var p=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var k=this;for(var m=0,n=p.length;m<n;m++){k[p[m]]=j(k[p[m]],k)}if(b){o.addEventListener("mouseover",this.onMouse,true);o.addEventListener("mousedown",this.onMouse,true);o.addEventListener("mouseup",this.onMouse,true)}o.addEventListener("click",this.onClick,true);o.addEventListener("touchstart",this.onTouchStart,false);o.addEventListener("touchmove",this.onTouchMove,false);o.addEventListener("touchend",this.onTouchEnd,false);o.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){o.removeEventListener=function(t,i,l){var s=Node.prototype.removeEventListener;if(t==="click"){s.call(o,t,i.hijacked||i,l)}else{s.call(o,t,i,l)}};o.addEventListener=function(t,l,s){var i=Node.prototype.addEventListener;if(t==="click"){i.call(o,t,l.hijacked||(l.hijacked=function(u){if(!u.propagationStopped){l(u)}}),s)}else{i.call(o,t,l,s)}}}if(typeof o.onclick==="function"){q=o.onclick;o.addEventListener("click",function(i){q(i)},false);o.onclick=null}}var g=navigator.userAgent.indexOf("Windows Phone")>=0;var b=navigator.userAgent.indexOf("Android")>0&&!g;var d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!g;var e=d&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var f=d&&(/OS [6-7]_\d/).test(navigator.userAgent);var c=navigator.userAgent.indexOf("BB10")>0;h.prototype.needsClick=function(i){switch(i.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(i.disabled){return true}break;case"input":if((d&&i.type==="file")||i.disabled){return true}break;case"label":case"iframe":case"video":return true;default:}return(/\bneedsclick\b/).test(i.className)};h.prototype.needsFocus=function(i){switch(i.nodeName.toLowerCase()){case"textarea":return true;case"select":return !b;case"input":switch(i.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !i.disabled&&!i.readOnly;default:return(/\bneedsfocus\b/).test(i.className)}};h.prototype.sendClick=function(k,j){var i,l;if(document.activeElement&&document.activeElement!==k){document.activeElement.blur()}l=j.changedTouches[0];i=document.createEvent("MouseEvents");i.initMouseEvent(this.determineEventType(k),true,true,window,1,l.screenX,l.screenY,l.clientX,l.clientY,false,false,false,false,0,null);i.forwardedTouchEvent=true;k.dispatchEvent(i)};h.prototype.determineEventType=function(i){if(b&&i.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};h.prototype.focus=function(j){var i;if(d&&j.setSelectionRange&&j.type.indexOf("date")!==0&&j.type!=="time"&&j.type!=="month"){i=j.value.length;j.setSelectionRange(i,i)}else{j.focus()}};h.prototype.updateScrollParent=function(k){var j,i;j=k.fastClickScrollParent;if(!j||!j.contains(k)){i=k;do{if(i.scrollHeight>i.offsetHeight){j=i;k.fastClickScrollParent=i;break}i=i.parentElement}while(i)}if(j){j.fastClickLastScrollTop=j.scrollTop}};h.prototype.getTargetElementFromEventTarget=function(i){if(i.nodeType===Node.TEXT_NODE){return i.parentNode}return i};h.prototype.onTouchStart=function(i){var k,l,j;if(i.targetTouches.length>1){return true}k=this.getTargetElementFromEventTarget(i.target);l=i.targetTouches[0];if(d){j=window.getSelection();if(j.rangeCount&&!j.isCollapsed){return true}if(!e){if(l.identifier&&l.identifier===this.lastTouchIdentifier){i.preventDefault();return false}this.lastTouchIdentifier=l.identifier;this.updateScrollParent(k)}}this.trackingClick=true;this.trackingClickStart=i.timeStamp;this.targetElement=k;this.touchStartX=l.pageX;this.touchStartY=l.pageY;if((i.timeStamp-this.lastClickTime)<this.tapDelay){i.preventDefault()}return true};h.prototype.touchHasMoved=function(j){var k=j.changedTouches[0],i=this.touchBoundary;if(Math.abs(k.pageX-this.touchStartX)>i||Math.abs(k.pageY-this.touchStartY)>i){return true}return false};h.prototype.onTouchMove=function(i){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(i.target)||this.touchHasMoved(i)){this.trackingClick=false;this.targetElement=null}return true};h.prototype.findControl=function(i){if(i.control!==undefined){return i.control}if(i.htmlFor){return document.getElementById(i.htmlFor)}return i.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};h.prototype.onTouchEnd=function(i){var j,p,n,l,o,m=this.targetElement;if(!this.trackingClick){return true}if((i.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true}if((i.timeStamp-this.trackingClickStart)>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=i.timeStamp;p=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(f){o=i.changedTouches[0];m=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||m;m.fastClickScrollParent=this.targetElement.fastClickScrollParent}n=m.tagName.toLowerCase();if(n==="label"){j=this.findControl(m);if(j){this.focus(m);if(b){return false}m=j}}else{if(this.needsFocus(m)){if((i.timeStamp-p)>100||(d&&window.top!==window&&n==="input")){this.targetElement=null;return false}this.focus(m);this.sendClick(m,i);if(!d||n!=="select"){this.targetElement=null;i.preventDefault()}return false}else{var k=m;while(k&&(k.tagName.toUpperCase()!=="BODY")){if(k.tagName.toUpperCase()==="LABEL"){a(k).find("input").click()}k=k.parentNode}}}if(d&&!e){l=m.fastClickScrollParent;if(l&&l.fastClickLastScrollTop!==l.scrollTop){return true}}if(!this.needsClick(m)){i.preventDefault();this.sendClick(m,i)}return false};h.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};h.prototype.onMouse=function(i){if(!this.targetElement){return true}if(i.forwardedTouchEvent){return true}if(!i.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(i.stopImmediatePropagation){i.stopImmediatePropagation()}else{i.propagationStopped=true}i.stopPropagation();i.preventDefault();return false}return true};h.prototype.onClick=function(i){var j;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(i.target.type==="submit"&&i.detail===0){return true}j=this.onMouse(i);if(!j){this.targetElement=null}return j};h.prototype.destroy=function(){var i=this.layer;if(b){i.removeEventListener("mouseover",this.onMouse,true);i.removeEventListener("mousedown",this.onMouse,true);i.removeEventListener("mouseup",this.onMouse,true)}i.removeEventListener("click",this.onClick,true);i.removeEventListener("touchstart",this.onTouchStart,false);i.removeEventListener("touchmove",this.onTouchMove,false);i.removeEventListener("touchend",this.onTouchEnd,false);i.removeEventListener("touchcancel",this.onTouchCancel,false)};h.notNeeded=function(l){var m;var j;var i;var k;if(typeof window.ontouchstart==="undefined"){return true}j=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(j){if(b){m=document.querySelector("meta[name=viewport]");if(m){if(m.content.indexOf("user-scalable=no")!==-1){return true}if(j>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(c){i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(i[1]>=10&&i[2]>=3){m=document.querySelector("meta[name=viewport]");if(m){if(m.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(l.style.msTouchAction==="none"||l.style.touchAction==="manipulation"){return true}k=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(k>=27){m=document.querySelector("meta[name=viewport]");if(m&&(m.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(l.style.touchAction==="none"||l.style.touchAction==="manipulation"){return true}return false};h.attach=function(i,j){return new h(i,j)};a(function(){h.attach(document.body)})}($));+function($){$.Template7=$.t7=(function(){function isArray(arr){return Object.prototype.toString.apply(arr)==="[object Array]"}function isObject(obj){return obj instanceof Object}function isFunction(func){return typeof func==="function"}var cache={};function helperToSlices(string){var helperParts=string.replace(/[{}#}]/g,"").split(" ");var slices=[];var shiftIndex,i,j;for(i=0;i<helperParts.length;i++){var part=helperParts[i];if(i===0){slices.push(part)}else{if(part.indexOf('"')===0){if(part.match(/"/g).length===2){slices.push(part)}else{shiftIndex=0;for(j=i+1;j<helperParts.length;j++){part+=" "+helperParts[j];if(helperParts[j].indexOf('"')>=0){shiftIndex=j;slices.push(part);break}}if(shiftIndex){i=shiftIndex}}}else{if(part.indexOf("=")>0){var hashParts=part.split("=");var hashName=hashParts[0];var hashContent=hashParts[1];if(hashContent.match(/"/g).length!==2){shiftIndex=0;for(j=i+1;j<helperParts.length;j++){hashContent+=" "+helperParts[j];if(helperParts[j].indexOf('"')>=0){shiftIndex=j;break}}if(shiftIndex){i=shiftIndex}}var hash=[hashName,hashContent.replace(/"/g,"")];slices.push(hash)}else{slices.push(part)}}}}return slices}function stringToBlocks(string){var blocks=[],i,j,k;if(!string){return[]}var _blocks=string.split(/({{[^{^}]*}})/);for(i=0;i<_blocks.length;i++){var block=_blocks[i];if(block===""){continue}if(block.indexOf("{{")<0){blocks.push({type:"plain",content:block})}else{if(block.indexOf("{/")>=0){continue}if(block.indexOf("{#")<0&&block.indexOf(" ")<0&&block.indexOf("else")<0){blocks.push({type:"variable",contextName:block.replace(/[{}]/g,"")});continue}var helperSlices=helperToSlices(block);var helperName=helperSlices[0];var helperContext=[];var helperHash={};for(j=1;j<helperSlices.length;j++){var slice=helperSlices[j];if(isArray(slice)){helperHash[slice[0]]=slice[1]==="false"?false:slice[1]}else{helperContext.push(slice)}}if(block.indexOf("{#")>=0){var helperStartIndex=i;var helperContent="";var elseContent="";var toSkip=0;var shiftIndex;var foundClosed=false,foundElse=false,foundClosedElse=false,depth=0;for(j=i+1;j<_blocks.length;j++){if(_blocks[j].indexOf("{{#")>=0){depth++}if(_blocks[j].indexOf("{{/")>=0){depth--}if(_blocks[j].indexOf("{{#"+helperName)>=0){helperContent+=_blocks[j];if(foundElse){elseContent+=_blocks[j]}toSkip++}else{if(_blocks[j].indexOf("{{/"+helperName)>=0){if(toSkip>0){toSkip--;helperContent+=_blocks[j];if(foundElse){elseContent+=_blocks[j]}}else{shiftIndex=j;foundClosed=true;break}}else{if(_blocks[j].indexOf("else")>=0&&depth===0){foundElse=true}else{if(!foundElse){helperContent+=_blocks[j]}if(foundElse){elseContent+=_blocks[j]}}}}}if(foundClosed){if(shiftIndex){i=shiftIndex}blocks.push({type:"helper",helperName:helperName,contextName:helperContext,content:helperContent,inverseContent:elseContent,hash:helperHash})}}else{if(block.indexOf(" ")>0){blocks.push({type:"helper",helperName:helperName,contextName:helperContext,hash:helperHash})}}}}return blocks}var Template7=function(template){var t=this;t.template=template;function getCompileFn(block,depth){if(block.content){return compile(block.content,depth)}else{return function(){return""}}}function getCompileInverse(block,depth){if(block.inverseContent){return compile(block.inverseContent,depth)}else{return function(){return""}}}function getCompileVar(name,ctx){var variable,parts,levelsUp=0,initialCtx=ctx;if(name.indexOf("../")===0){levelsUp=name.split("../").length-1;var newDepth=ctx.split("_")[1]-levelsUp;ctx="ctx_"+(newDepth>=1?newDepth:1);parts=name.split("../")[levelsUp].split(".")}else{if(name.indexOf("@global")===0){ctx="$.Template7.global";parts=name.split("@global.")[1].split(".")}else{if(name.indexOf("@root")===0){ctx="ctx_1";parts=name.split("@root.")[1].split(".")}else{parts=name.split(".")}}}variable=ctx;for(var i=0;i<parts.length;i++){var part=parts[i];if(part.indexOf("@")===0){if(i>0){variable+="[(data && data."+part.replace("@","")+")]"}else{variable="(data && data."+name.replace("@","")+")"}}else{if(isFinite(part)){variable+="["+part+"]"}else{if(part.indexOf("this")===0){variable=part.replace("this",ctx)}else{variable+="."+part}}}}return variable}function getCompiledArguments(contextArray,ctx){var arr=[];for(var i=0;i<contextArray.length;i++){if(contextArray[i].indexOf('"')===0){arr.push(contextArray[i])}else{arr.push(getCompileVar(contextArray[i],ctx))}}return arr.join(", ")}function compile(template,depth){depth=depth||1;template=template||t.template;if(typeof template!=="string"){throw new Error("Template7: Template must be a string")}var blocks=stringToBlocks(template);if(blocks.length===0){return function(){return""}}var ctx="ctx_"+depth;var resultString="(function ("+ctx+", data) {\n";if(depth===1){resultString+="function isArray(arr){return Object.prototype.toString.apply(arr) === '[object Array]';}\n";resultString+="function isFunction(func){return (typeof func === 'function');}\n";resultString+='function c(val, ctx) {if (typeof val !== "undefined") {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n'}resultString+="var r = '';\n";var i,j,context;for(i=0;i<blocks.length;i++){var block=blocks[i];if(block.type==="plain"){resultString+="r +='"+(block.content).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';";continue}var variable,compiledArguments;if(block.type==="variable"){variable=getCompileVar(block.contextName,ctx);resultString+="r += c("+variable+", "+ctx+");"}if(block.type==="helper"){if(block.helperName in t.helpers){compiledArguments=getCompiledArguments(block.contextName,ctx);resultString+="r += ($.Template7.helpers."+block.helperName+").call("+ctx+", "+(compiledArguments&&(compiledArguments+", "))+"{hash:"+JSON.stringify(block.hash)+", data: data || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: ctx_1});"}else{if(block.contextName.length>0){throw new Error('Template7: Missing helper: "'+block.helperName+'"')}else{variable=getCompileVar(block.helperName,ctx);resultString+="if ("+variable+") {";resultString+="if (isArray("+variable+")) {";resultString+="r += ($.Template7.helpers.each).call("+ctx+", "+variable+", {hash:"+JSON.stringify(block.hash)+", data: data || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: ctx_1});";resultString+="}else {";resultString+="r += ($.Template7.helpers.with).call("+ctx+", "+variable+", {hash:"+JSON.stringify(block.hash)+", data: data || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: ctx_1});";resultString+="}}"}}}}resultString+="\nreturn r;})";return eval.call(window,resultString)}t.compile=function(template){if(!t.compiled){t.compiled=compile(template)}return t.compiled}};Template7.prototype={options:{},helpers:{"if":function(context,options){if(isFunction(context)){context=context.call(this)}if(context){return options.fn(this,options.data)}else{return options.inverse(this,options.data)}},unless:function(context,options){if(isFunction(context)){context=context.call(this)}if(!context){return options.fn(this,options.data)}else{return options.inverse(this,options.data)}},each:function(context,options){var ret="",i=0;if(isFunction(context)){context=context.call(this)}if(isArray(context)){if(options.hash.reverse){context=context.reverse()}for(i=0;i<context.length;i++){ret+=options.fn(context[i],{first:i===0,last:i===context.length-1,index:i})}if(options.hash.reverse){context=context.reverse()}}else{for(var key in context){i++;ret+=options.fn(context[key],{key:key})}}if(i>0){return ret}else{return options.inverse(this)}},"with":function(context,options){if(isFunction(context)){context=context.call(this)}return options.fn(context)},join:function(context,options){if(isFunction(context)){context=context.call(this)}return context.join(options.hash.delimiter||options.hash.delimeter)},js:function(expression,options){var func;if(expression.indexOf("return")>=0){func="(function(){"+expression+"})"}else{func="(function(){return ("+expression+")})"}return eval.call(this,func).call(this)},js_compare:function(expression,options){var func;if(expression.indexOf("return")>=0){func="(function(){"+expression+"})"}else{func="(function(){return ("+expression+")})"}var condition=eval.call(this,func).call(this);if(condition){return options.fn(this,options.data)}else{return options.inverse(this,options.data)}}}};var t7=function(template,data){if(arguments.length===2){var instance=new Template7(template);var rendered=instance.compile()(data);instance=null;return(rendered)}else{return new Template7(template)}};t7.registerHelper=function(name,fn){Template7.prototype.helpers[name]=fn};t7.unregisterHelper=function(name){Template7.prototype.helpers[name]=undefined;delete Template7.prototype.helpers[name]};t7.compile=function(template,options){var instance=new Template7(template,options);return instance.compile()};t7.options=Template7.prototype.options;t7.helpers=Template7.prototype.helpers;return t7})()}($);+function(a){a.getCurrentPage=function(){return a(".page")[0]||document.body}}($);+function(a){var c=function(j,k,e){var f=a(j);var d=f.hasClass("page")?"page-current":"active";if(arguments.length===2){if(typeof k==="boolean"){e=k}}if(f.length===0){return false}if(f.hasClass(d)){if(e){f.trigger("show")}return false}var l=f.parent(".tabs");if(l.length===0){return false}var g=l.children(".tab."+d).removeClass(d);f.addClass(d);f.trigger("show");if(k){k=a(k)}else{if(typeof j==="string"){k=a('.tab-link[href="'+j+'"]')}else{k=a('.tab-link[href="#'+f.attr("id")+'"]')}if(!k||k&&k.length===0){a("[data-tab]").each(function(){if(f.is(a(this).attr("data-tab"))){k=a(this)}})}}if(k.length===0){return}var i;if(g&&g.length>0){var h=g.attr("id");if(h){i=a('.tab-link[href="#'+h+'"]')}if(!i||i&&i.length===0){a("[data-tab]").each(function(){if(g.is(a(this).attr("data-tab"))){i=a(this)}})}}if(k&&k.length>0){k.addClass("active")}if(i&&i.length>0){i.removeClass("active")}return true};var b=a.showTab;a.showTab=c;a.showTab.noConflict=function(){a.showTab=b;return this};a(document).on("click",".tab-link",function(f){f.preventDefault();var d=a(this);c(d.data("tab")||d.attr("href"),d)})}($);+function(a){a(document).on("click",".tab-item",function(d){var c=a(d.currentTarget);if(!c.hasClass("tab-link")){c.parent().find(".active").removeClass("active");c.addClass("active")}});var b=function(d,f){var c=a(".bar-tab .tab-item[href='#"+f+"']");c.parent().find(".active").removeClass("active");c.addClass("active")};a(document).on("pageInit",b);a(document).on("pageReinit",b);a.showToolbar=function(c){a(document.body)[c?"removeClass":"addClass"]("tabbar-hidden")}}($);+function(a){var b=document.createElement("div");a.modalStack=[];var e=a.Template7;a.modalStackClearQueue=function(){if(a.modalStack.length){(a.modalStack.shift())()}};a.modal=function(m){m=m||{};var k="";if(c.modalTemplate){if(!a._compiledTemplates.modal){a._compiledTemplates.modal=e.compile(c.modalTemplate)}k=a._compiledTemplates.modal(m)}else{var g="";if(m.buttons&&m.buttons.length>0){for(var h=0;h<m.buttons.length;h++){g+='<span class="modal-button'+(m.buttons[h].bold?" modal-button-bold":"")+'">'+m.buttons[h].text+"</span>"}}var o=m.title?'<div class="modal-title">'+m.title+"</div>":"";var n=m.text?'<div class="modal-text">'+m.text+"</div>":"";var f=m.afterText?m.afterText:"";var l=!m.buttons||m.buttons.length===0?"modal-no-buttons":"";var p=m.verticalButtons?"modal-buttons-vertical":"";k='<div class="modal '+l+'"><div class="modal-inner">'+(o+n+f)+'</div><div class="modal-buttons '+p+'">'+g+"</div></div>"}b.innerHTML=k;var j=a(b).children();a(c.modalContainer).append(j[0]);j.find(".modal-button").each(function(q,i){a(i).on("click",function(r){if(m.buttons[q].close!==false){a.closeModal(j)}if(m.buttons[q].onClick){m.buttons[q].onClick(j,r)}if(m.onClick){m.onClick(j,q)}})});a.openModal(j);return j[0]};a.alert=function(g,h,f){if(typeof h==="function"){f=arguments[1];h=undefined}return a.modal({text:g||"",title:typeof h==="undefined"?c.modalTitle:h,buttons:[{text:c.modalButtonOk,bold:true,onClick:f}]})};a.confirm=function(h,i,g,f){if(typeof i==="function"){f=arguments[2];g=arguments[1];i=undefined}return a.modal({text:h||"",title:typeof i==="undefined"?c.modalTitle:i,buttons:[{text:c.modalButtonCancel,onClick:f},{text:c.modalButtonOk,bold:true,onClick:g}]})};a.prompt=function(h,i,g,f){if(typeof i==="function"){f=arguments[2];g=arguments[1];i=undefined}return a.modal({text:h||"",title:typeof i==="undefined"?c.modalTitle:i,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:c.modalButtonCancel},{text:c.modalButtonOk,bold:true}],onClick:function(k,j){if(j===0&&f){f(a(k).find(".modal-text-input").val())}if(j===1&&g){g(a(k).find(".modal-text-input").val())}}})};a.modalLogin=function(h,i,g,f){if(typeof i==="function"){f=arguments[2];g=arguments[1];i=undefined}return a.modal({text:h||"",title:typeof i==="undefined"?c.modalTitle:i,afterText:'<input type="text" name="modal-username" placeholder="'+c.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+c.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:c.modalButtonCancel},{text:c.modalButtonOk,bold:true}],onClick:function(k,j){var m=a(k).find('.modal-text-input[name="modal-username"]').val();var l=a(k).find('.modal-text-input[name="modal-password"]').val();if(j===0&&f){f(m,l)}if(j===1&&g){g(m,l)}}})};a.modalPassword=function(h,i,g,f){if(typeof i==="function"){f=arguments[2];g=arguments[1];i=undefined}return a.modal({text:h||"",title:typeof i==="undefined"?c.modalTitle:i,afterText:'<input type="password" name="modal-password" placeholder="'+c.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:c.modalButtonCancel},{text:c.modalButtonOk,bold:true}],onClick:function(k,j){var l=a(k).find('.modal-text-input[name="modal-password"]').val();if(j===0&&f){f(l)}if(j===1&&g){g(l)}}})};a.showPreloader=function(f){return a.modal({title:f||c.modalPreloaderTitle,text:'<div class="preloader"></div>'})};a.hidePreloader=function(){a.closeModal(".modal.modal-in")};a.showIndicator=function(){a(c.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')};a.hideIndicator=function(){a(".preloader-indicator-overlay, .preloader-indicator-modal").remove()};a.actions=function(u,s){var v=false,q,n,k;if(arguments.length===1){s=u}else{if(a.device.ios){if(a.device.ipad){v=true}}else{if(a(window).width()>=768){v=true}}}s=s||[];if(s.length>0&&!a.isArray(s[0])){s=[s]}var r;if(v){var f=c.modalActionsToPopoverTemplate||'<div class="popover actions-popover"><div class="popover-inner">{{#each this}}<div class="list-block"><ul>{{#each this}}{{#if label}}<li class="actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</li>{{else}}<li><a href="#" class="item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}} {{#if disabled}}disabled{{/if}}">{{text}}</a></li>{{/if}}{{/each}}</ul></div>{{/each}}</div></div>';if(!a._compiledTemplates.actionsToPopover){a._compiledTemplates.actionsToPopover=e.compile(f)}var t=a._compiledTemplates.actionsToPopover(s);q=a(a.popover(t,u,true));n=".list-block ul";k=".list-button"}else{if(c.modalActionsTemplate){if(!a._compiledTemplates.actions){a._compiledTemplates.actions=e.compile(c.modalActionsTemplate)}r=a._compiledTemplates.actions(s)}else{var l="";for(var o=0;o<s.length;o++){for(var p=0;p<s[o].length;p++){if(p===0){l+='<div class="actions-modal-group">'}var g=s[o][p];var h=g.label?"actions-modal-label":"actions-modal-button";if(g.bold){h+=" actions-modal-button-bold"}if(g.color){h+=" color-"+g.color}if(g.bg){h+=" bg-"+g.bg}if(g.disabled){h+=" disabled"}l+='<span class="'+h+'">'+g.text+"</span>";if(p===s[o].length-1){l+="</div>"}}}r='<div class="actions-modal">'+l+"</div>"}b.innerHTML=r;q=a(b).children();a(c.modalContainer).append(q[0]);n=".actions-modal-group";k=".actions-modal-button"}var m=q.find(n);m.each(function(w,i){var j=w;a(i).children().each(function(B,A){var x=B;var y=s[j][x];var z;if(!v&&a(A).is(k)){z=a(A)}if(v&&a(A).find(k).length>0){z=a(A).find(k)}if(z){z.on("click",function(C){if(y.close!==false){a.closeModal(q)}if(y.onClick){y.onClick(q,C)}})}})});if(!v){a.openModal(q)}return q[0]};a.popover=function(g,j,h){if(typeof h==="undefined"){h=true}if(typeof g==="string"&&g.indexOf("<")>=0){var f=document.createElement("div");f.innerHTML=g.trim();if(f.childNodes.length>0){g=f.childNodes[0];if(h){g.classList.add("remove-on-close")}a(c.modalContainer).append(g)}else{return false}}g=a(g);j=a(j);if(g.length===0||j.length===0){return false}if(g.find(".popover-angle").length===0){g.append('<div class="popover-angle"></div>')}g.show();function i(){g.css({left:"",top:""});var t=g.width();var p=g.height();var l=g.find(".popover-angle");var n=l.width()/2;var m,o;l.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var x=j.outerWidth();var u=j.outerHeight();var v=j.offset();var w=j.parents(".page");if(w.length>0){v.top=v.top-w[0].scrollTop}var y=a(window).height();var z=a(window).width();var s=0;var q=0;var k=0;var r="top";if((p+n)<v.top){s=v.top-p-n}else{if((p+n)<y-v.top-u){r="bottom";s=v.top+u+n}else{r="middle";s=u/2+v.top-p/2;k=s;if(s<0){s=5}else{if(s+p>y){s=y-p-5}}k=k-s}}if(r==="top"||r==="bottom"){q=x/2+v.left-t/2;k=q;if(q<5){q=5}if(q+t>z){q=z-t-5}if(r==="top"){l.addClass("on-bottom")}if(r==="bottom"){l.addClass("on-top")}k=k-q;m=(t/2-n+k);m=Math.max(Math.min(m,t-n*2-6),6);l.css({left:m+"px"})}else{if(r==="middle"){q=v.left-t-n;l.addClass("on-right");if(q<5){q=v.left+x+n;l.removeClass("on-right").addClass("on-left")}if(q+t>z){q=z-t-5;l.removeClass("on-right").addClass("on-left")}o=(p/2-n+k);o=Math.max(Math.min(o,p-n*2-6),6);l.css({top:o+"px"})}}g.css({top:s+"px",left:q+"px"})}i();a(window).on("resize",i);g.on("close",function(){a(window).off("resize",i)});if(g.find("."+c.viewClass).length>0){a.sizeNavbars(g.find("."+c.viewClass)[0])}a.openModal(g);return g[0]};a.popup=function(g,h){if(typeof h==="undefined"){h=true}if(typeof g==="string"&&g.indexOf("<")>=0){var f=document.createElement("div");f.innerHTML=g.trim();if(f.childNodes.length>0){g=f.childNodes[0];if(h){g.classList.add("remove-on-close")}a(c.modalContainer).append(g)}else{return false}}g=a(g);if(g.length===0){return false}g.show();if(g.find("."+c.viewClass).length>0){a.sizeNavbars(g.find("."+c.viewClass)[0])}a.openModal(g);return g[0]};a.pickerModal=function(f,g){if(typeof g==="undefined"){g=true}if(typeof f==="string"&&f.indexOf("<")>=0){f=a(f);if(f.length>0){if(g){f.addClass("remove-on-close")}a(c.modalContainer).append(f[0])}else{return false}}f=a(f);if(f.length===0){return false}f.show();a.openModal(f);return f[0]};a.loginScreen=function(f){if(!f){f=".login-screen"}f=a(f);if(f.length===0){return false}f.show();if(f.find("."+c.viewClass).length>0){a.sizeNavbars(f.find("."+c.viewClass)[0])}a.openModal(f);return f[0]};a.toast=function(g,h){var f=a("<div class='modal toast'>"+g+"</div>").appendTo(document.body);a.openModal(f);setTimeout(function(){a.closeModal(f)},h||2000)};a.openModal=function(m){if(c.closePrevious){a.closeModal()}m=a(m);var h=m.hasClass("modal");if(a(".modal.modal-in:not(.modal-out)").length&&c.modalStack&&h){a.modalStack.push(function(){a.openModal(m)});return}var j=m.hasClass("popover");var k=m.hasClass("popup");var g=m.hasClass("login-screen");var i=m.hasClass("picker-modal");var l=m.hasClass("toast");if(h){m.show();m.css({marginTop:-Math.round(m.outerHeight()/2)+"px"})}if(l){m.show();m.css({marginLeft:-Math.round(parseInt(window.getComputedStyle(m[0]).width)/2)+"px"})}var n;if(!g&&!i&&!l){if(a(".modal-overlay").length===0&&!k){a(c.modalContainer).append('<div class="modal-overlay"></div>')}if(a(".popup-overlay").length===0&&k){a(c.modalContainer).append('<div class="popup-overlay"></div>')}n=k?a(".popup-overlay"):a(".modal-overlay")}var f=m[0].clientLeft;m.trigger("open");if(i){a(c.modalContainer).addClass("with-picker-modal")}if(!g&&!i&&!l){n.addClass("modal-overlay-visible")}m.removeClass("modal-out").addClass("modal-in").transitionEnd(function(o){if(m.hasClass("modal-out")){m.trigger("closed")}else{m.trigger("opened")}});return true};a.closeModal=function(k){k=a(k||".modal-in");if(typeof k!=="undefined"&&k.length===0){return}var g=k.hasClass("modal");var i=k.hasClass("popover");var j=k.hasClass("popup");var f=k.hasClass("login-screen");var h=k.hasClass("picker-modal");var m=k.hasClass("remove-on-close");var l=j?a(".popup-overlay"):a(".modal-overlay");if(j){if(k.length===a(".popup.modal-in").length){l.removeClass("modal-overlay-visible")}}else{if(!h){l.removeClass("modal-overlay-visible")}}k.trigger("close");if(h){a(c.modalContainer).removeClass("with-picker-modal");a(c.modalContainer).addClass("picker-modal-closing")}if(!i){k.removeClass("modal-in").addClass("modal-out").transitionEnd(function(n){if(k.hasClass("modal-out")){k.trigger("closed")}else{k.trigger("opened")}if(h){a(c.modalContainer).removeClass("picker-modal-closing")}if(j||f||h){k.removeClass("modal-out").hide();if(m&&k.length>0){k.remove()}}else{k.remove()}});if(g&&c.modalStack){a.modalStackClearQueue()}}else{k.removeClass("modal-in modal-out").trigger("closed").hide();if(m){k.remove()}}return true};function d(h){var f=a(this);var k=f.attr("href");var g=f.dataset();if(f.hasClass("open-popover")){var i;if(g.popover){i=g.popover}else{i=".popover"}a.popover(i,f)}if(f.hasClass("close-popover")){a.closeModal(".popover.modal-in")}var j;if(f.hasClass("open-popup")){if(g.popup){j=g.popup}else{j=".popup"}a.popup(j)}if(f.hasClass("close-popup")){if(g.popup){j=g.popup}else{j=".popup.modal-in"}a.closeModal(j)}if(f.hasClass("modal-overlay")){if(a(".modal.modal-in").length>0&&c.modalCloseByOutside){a.closeModal(".modal.modal-in")}if(a(".actions-modal.modal-in").length>0&&c.actionsCloseByOutside){a.closeModal(".actions-modal.modal-in")}if(a(".popover.modal-in").length>0){a.closeModal(".popover.modal-in")}}if(f.hasClass("popup-overlay")){if(a(".popup.modal-in").length>0&&c.popupCloseByOutside){a.closeModal(".popup.modal-in")}}}var c=a.modal.prototype.defaults={modalButtonOk:"OK",modalButtonCancel:"Cancel",modalPreloaderTitle:"Loading...",modalContainer:document.body,modalCloseByOutside:true,actionsCloseByOutside:false,popupCloseByOutside:true,closePrevious:true};a(function(){a(document).on("click"," .modal-overlay, .popup-overlay, .close-popup, .open-popup, .open-popover, .close-popover, .close-picker",d);c.modalContainer=c.modalContainer||document.body})}($);+function(a){var d=false;var c;var b=function(n){var m=this;n=n||{};for(var f in c){if(typeof n[f]==="undefined"){n[f]=c[f]}}m.params=n;m.initialized=false;m.inline=m.params.container?true:false;m.isH=m.params.direction==="horizontal";var i=m.isH?(d?-1:1):1;m.animating=false;function j(){var o=false;if(!m.params.convertToPopover&&!m.params.onlyInPopover){return o}if(!m.inline&&m.params.input){if(m.params.onlyInPopover){o=true}else{if(a.device.ios){o=a.device.ipad?true:false}else{if(a(window).width()>=768){o=true}}}}return o}function h(){if(m.opened&&m.container&&m.container.length>0&&m.container.parents(".popover").length>0){return true}else{return false}}function g(o){o=new Date(o);var t=o.getFullYear();var q=o.getMonth();var r=q+1;var p=o.getDate();var s=o.getDay();return m.params.dateFormat.replace(/yyyy/g,t).replace(/yy/g,(t+"").substring(2)).replace(/mm/g,r<10?"0"+r:r).replace(/m/g,r).replace(/MM/g,m.params.monthNames[q]).replace(/M/g,m.params.monthNamesShort[q]).replace(/dd/g,p<10?"0"+p:p).replace(/d/g,p).replace(/DD/g,m.params.dayNames[s]).replace(/D/g,m.params.dayNamesShort[s])}m.addValue=function(q){if(m.params.multiple){if(!m.value){m.value=[]}var p;for(var o=0;o<m.value.length;o++){if(new Date(q).getTime()===new Date(m.value[o]).getTime()){p=o}}if(typeof p==="undefined"){m.value.push(q)}else{m.value.splice(p,1)}m.updateValue()}else{m.value=[q];m.updateValue()}};m.setValue=function(o){m.value=o;m.updateValue()};m.updateValue=function(){m.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var o,p;for(o=0;o<m.value.length;o++){var q=new Date(m.value[o]);m.wrapper.find('.picker-calendar-day[data-date="'+q.getFullYear()+"-"+q.getMonth()+"-"+q.getDate()+'"]').addClass("picker-calendar-day-selected")}if(m.params.onChange){m.params.onChange(m,m.value,m.value.map(g))}if(m.input&&m.input.length>0){if(m.params.formatValue){p=m.params.formatValue(m,m.value)}else{p=[];for(o=0;o<m.value.length;o++){p.push(g(m.value[o]))}p=p.join(", ")}a(m.input).val(p);a(m.input).trigger("change")}};m.initCalendarEvents=function(){var p;var o=true;var x,v,F,G,A,B,E,C,z,q,I,H,y,D,w;function u(J){if(v||x){return}x=true;var K=a.getTouchPosition(J);F=B=K.x;G=B=K.y;E=(new Date()).getTime();y=0;o=true;w=undefined;z=q=m.monthsTranslate}function t(J){if(!x){return}var K=a.getTouchPosition(J);A=K.x;B=K.y;if(typeof w==="undefined"){w=!!(w||Math.abs(B-G)>Math.abs(A-F))}if(m.isH&&w){x=false;return}J.preventDefault();if(m.animating){x=false;return}o=false;if(!v){v=true;I=m.wrapper[0].offsetWidth;H=m.wrapper[0].offsetHeight;m.wrapper.transition(0)}J.preventDefault();D=m.isH?A-F:B-G;y=D/(m.isH?I:H);q=(m.monthsTranslate*i+y)*100;m.wrapper.transform("translate3d("+(m.isH?q:0)+"%, "+(m.isH?0:q)+"%, 0)")}function s(J){if(!x||!v){x=v=false;return}x=v=false;C=new Date().getTime();if(C-E<300){if(Math.abs(D)<10){m.resetMonth()}else{if(D>=10){if(d){m.nextMonth()}else{m.prevMonth()}}else{if(d){m.prevMonth()}else{m.nextMonth()}}}}else{if(y<=-0.5){if(d){m.prevMonth()}else{m.nextMonth()}}else{if(y>=0.5){if(d){m.nextMonth()}else{m.prevMonth()}}else{m.resetMonth()}}}setTimeout(function(){o=true},100)}function r(N){if(!o){return}var M=a(N.target).parents(".picker-calendar-day");if(M.length===0&&a(N.target).hasClass("picker-calendar-day")){M=a(N.target)}if(M.length===0){return}if(M.hasClass("picker-calendar-day-selected")&&!m.params.multiple){return}if(M.hasClass("picker-calendar-day-disabled")){return}if(M.hasClass("picker-calendar-day-next")){m.nextMonth()}if(M.hasClass("picker-calendar-day-prev")){m.prevMonth()}var L=M.attr("data-year");var K=M.attr("data-month");var J=M.attr("data-day");if(m.params.onDayClick){m.params.onDayClick(m,M[0],L,K,J)}m.addValue(new Date(L,K,J).getTime());if(m.params.closeOnSelect){m.close()}}m.container.find(".picker-calendar-prev-month").on("click",m.prevMonth);m.container.find(".picker-calendar-next-month").on("click",m.nextMonth);m.container.find(".picker-calendar-prev-year").on("click",m.prevYear);m.container.find(".picker-calendar-next-year").on("click",m.nextYear);m.wrapper.on("click",r);if(m.params.touchMove){m.wrapper.on(a.touchEvents.start,u);m.wrapper.on(a.touchEvents.move,t);m.wrapper.on(a.touchEvents.end,s)}m.container[0].f7DestroyCalendarEvents=function(){m.container.find(".picker-calendar-prev-month").off("click",m.prevMonth);m.container.find(".picker-calendar-next-month").off("click",m.nextMonth);m.container.find(".picker-calendar-prev-year").off("click",m.prevYear);m.container.find(".picker-calendar-next-year").off("click",m.nextYear);m.wrapper.off("click",r);if(m.params.touchMove){m.wrapper.off(a.touchEvents.start,u);m.wrapper.off(a.touchEvents.move,t);m.wrapper.off(a.touchEvents.end,s)}}};m.destroyCalendarEvents=function(o){if("f7DestroyCalendarEvents" in m.container[0]){m.container[0].f7DestroyCalendarEvents()}};m.daysInMonth=function(p){var o=new Date(p);return new Date(o.getFullYear(),o.getMonth()+1,0).getDate()};m.monthHTML=function(s,I){s=new Date(s);var N=s.getFullYear(),G=s.getMonth(),t=s.getDate();if(I==="next"){if(G===11){s=new Date(N+1,0)}else{s=new Date(N,G+1,1)}}if(I==="prev"){if(G===0){s=new Date(N-1,11)}else{s=new Date(N,G-1,1)}}if(I==="next"||I==="prev"){G=s.getMonth();N=s.getFullYear()}var z=m.daysInMonth(new Date(s.getFullYear(),s.getMonth()).getTime()-10*24*60*60*1000),y=m.daysInMonth(s),B=new Date(s.getFullYear(),s.getMonth()).getDay();if(B===0){B=7}var u,r=[],C,D,L=6,q=7,H="",v=0+(m.params.firstDay-1),M=new Date().setHours(0,0,0,0),F=m.params.minDate?new Date(m.params.minDate).getTime():null,E=m.params.maxDate?new Date(m.params.maxDate).getTime():null;if(m.value&&m.value.length){for(C=0;C<m.value.length;C++){r.push(new Date(m.value[C]).setHours(0,0,0,0))}}for(C=1;C<=L;C++){var K="";var J=C;for(D=1;D<=q;D++){var p=D;v++;var x=v-B;var o="";if(x<0){x=z+x+1;o+=" picker-calendar-day-prev";u=new Date(G-1<0?N-1:N,G-1<0?11:G-1,x).getTime()}else{x=x+1;if(x>y){x=x-y;o+=" picker-calendar-day-next";u=new Date(G+1>11?N+1:N,G+1>11?0:G+1,x).getTime()}else{u=new Date(N,G,x).getTime()}}if(u===M){o+=" picker-calendar-day-today"}if(r.indexOf(u)>=0){o+=" picker-calendar-day-selected"}if(m.params.weekendDays.indexOf(p-1)>=0){o+=" picker-calendar-day-weekend"}if((F&&u<F)||(E&&u>E)){o+=" picker-calendar-day-disabled"}u=new Date(u);var A=u.getFullYear();var w=u.getMonth();K+='<div data-year="'+A+'" data-month="'+w+'" data-day="'+x+'" class="picker-calendar-day'+(o)+'" data-date="'+(A+"-"+w+"-"+x)+'"><span>'+x+"</span></div>"}H+='<div class="picker-calendar-row">'+K+"</div>"}H='<div class="picker-calendar-month" data-year="'+N+'" data-month="'+G+'">'+H+"</div>";return H};m.animating=false;m.updateCurrentMonthYear=function(o){if(typeof o==="undefined"){m.currentMonth=parseInt(m.months.eq(1).attr("data-month"),10);m.currentYear=parseInt(m.months.eq(1).attr("data-year"),10)}else{m.currentMonth=parseInt(m.months.eq(o==="next"?(m.months.length-1):0).attr("data-month"),10);m.currentYear=parseInt(m.months.eq(o==="next"?(m.months.length-1):0).attr("data-year"),10)}m.container.find(".current-month-value").text(m.params.monthNames[m.currentMonth]);m.container.find(".current-year-value").text(m.currentYear)};m.onMonthChangeStart=function(p){m.updateCurrentMonthYear(p);m.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var o=p==="next"?m.months.length-1:0;m.months.eq(o).addClass("picker-calendar-month-current");m.months.eq(p==="next"?o-1:o+1).addClass(p==="next"?"picker-calendar-month-prev":"picker-calendar-month-next");if(m.params.onMonthYearChangeStart){m.params.onMonthYearChangeStart(m,m.currentYear,m.currentMonth)}};m.onMonthChangeEnd=function(o,s){m.animating=false;var q,r,p;m.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove();if(typeof o==="undefined"){o="next";s=true}if(!s){p=m.monthHTML(new Date(m.currentYear,m.currentMonth),o)}else{m.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove();r=m.monthHTML(new Date(m.currentYear,m.currentMonth),"prev");q=m.monthHTML(new Date(m.currentYear,m.currentMonth),"next")}if(o==="next"||s){m.wrapper.append(p||q)}if(o==="prev"||s){m.wrapper.prepend(p||r)}m.months=m.wrapper.find(".picker-calendar-month");m.setMonthsTranslate(m.monthsTranslate);if(m.params.onMonthAdd){m.params.onMonthAdd(m,o==="next"?m.months.eq(m.months.length-1)[0]:m.months.eq(0)[0])}if(m.params.onMonthYearChangeEnd){m.params.onMonthYearChangeEnd(m,m.currentYear,m.currentMonth)}};m.setMonthsTranslate=function(r){r=r||m.monthsTranslate||0;if(typeof m.monthsTranslate==="undefined"){m.monthsTranslate=r}m.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var q=-(r+1)*100*i;var o=-r*100*i;var p=-(r-1)*100*i;m.months.eq(0).transform("translate3d("+(m.isH?q:0)+"%, "+(m.isH?0:q)+"%, 0)").addClass("picker-calendar-month-prev");m.months.eq(1).transform("translate3d("+(m.isH?o:0)+"%, "+(m.isH?0:o)+"%, 0)").addClass("picker-calendar-month-current");m.months.eq(2).transform("translate3d("+(m.isH?p:0)+"%, "+(m.isH?0:p)+"%, 0)").addClass("picker-calendar-month-next")};m.nextMonth=function(u){if(typeof u==="undefined"||typeof u==="object"){u="";if(!m.params.animate){u=0}}var q=parseInt(m.months.eq(m.months.length-1).attr("data-month"),10);var t=parseInt(m.months.eq(m.months.length-1).attr("data-year"),10);var o=new Date(t,q);var p=o.getTime();var v=m.animating?false:true;if(m.params.maxDate){if(p>new Date(m.params.maxDate).getTime()){return m.resetMonth()}}m.monthsTranslate--;if(q===m.currentMonth){var s=-(m.monthsTranslate)*100*i;var r=a(m.monthHTML(p,"next")).transform("translate3d("+(m.isH?s:0)+"%, "+(m.isH?0:s)+"%, 0)").addClass("picker-calendar-month-next");m.wrapper.append(r[0]);m.months=m.wrapper.find(".picker-calendar-month");if(m.params.onMonthAdd){m.params.onMonthAdd(m,m.months.eq(m.months.length-1)[0])}}m.animating=true;m.onMonthChangeStart("next");var w=(m.monthsTranslate*100)*i;m.wrapper.transition(u).transform("translate3d("+(m.isH?w:0)+"%, "+(m.isH?0:w)+"%, 0)");if(v){m.wrapper.transitionEnd(function(){m.onMonthChangeEnd("next")})}if(!m.params.animate){m.onMonthChangeEnd("next")}};m.prevMonth=function(u){if(typeof u==="undefined"||typeof u==="object"){u="";if(!m.params.animate){u=0}}var q=parseInt(m.months.eq(0).attr("data-month"),10);var t=parseInt(m.months.eq(0).attr("data-year"),10);var o=new Date(t,q+1,-1);var p=o.getTime();var v=m.animating?false:true;if(m.params.minDate){if(p<new Date(m.params.minDate).getTime()){return m.resetMonth()}}m.monthsTranslate++;if(q===m.currentMonth){var s=-(m.monthsTranslate)*100*i;var r=a(m.monthHTML(p,"prev")).transform("translate3d("+(m.isH?s:0)+"%, "+(m.isH?0:s)+"%, 0)").addClass("picker-calendar-month-prev");m.wrapper.prepend(r[0]);m.months=m.wrapper.find(".picker-calendar-month");if(m.params.onMonthAdd){m.params.onMonthAdd(m,m.months.eq(0)[0])}}m.animating=true;m.onMonthChangeStart("prev");var w=(m.monthsTranslate*100)*i;m.wrapper.transition(u).transform("translate3d("+(m.isH?w:0)+"%, "+(m.isH?0:w)+"%, 0)");if(v){m.wrapper.transitionEnd(function(){m.onMonthChangeEnd("prev")})}if(!m.params.animate){m.onMonthChangeEnd("prev")}};m.resetMonth=function(o){if(typeof o==="undefined"){o=""}var p=(m.monthsTranslate*100)*i;m.wrapper.transition(o).transform("translate3d("+(m.isH?p:0)+"%, "+(m.isH?0:p)+"%, 0)")};m.setYearMonth=function(y,q,v){if(typeof y==="undefined"){y=m.currentYear}if(typeof q==="undefined"){q=m.currentMonth}if(typeof v==="undefined"||typeof v==="object"){v="";if(!m.params.animate){v=0}}var u;if(y<m.currentYear){u=new Date(y,q+1,-1).getTime()}else{u=new Date(y,q).getTime()}if(m.params.maxDate&&u>new Date(m.params.maxDate).getTime()){return false}if(m.params.minDate&&u<new Date(m.params.minDate).getTime()){return false}var o=new Date(m.currentYear,m.currentMonth).getTime();var p=u>o?"next":"prev";var s=m.monthHTML(new Date(y,q));m.monthsTranslate=m.monthsTranslate||0;var t=m.monthsTranslate;var r,x;var w=m.animating?false:true;if(u>o){m.monthsTranslate--;if(!m.animating){m.months.eq(m.months.length-1).remove()}m.wrapper.append(s);m.months=m.wrapper.find(".picker-calendar-month");r=-(t-1)*100*i;m.months.eq(m.months.length-1).transform("translate3d("+(m.isH?r:0)+"%, "+(m.isH?0:r)+"%, 0)").addClass("picker-calendar-month-next")}else{m.monthsTranslate++;if(!m.animating){m.months.eq(0).remove()}m.wrapper.prepend(s);m.months=m.wrapper.find(".picker-calendar-month");r=-(t+1)*100*i;m.months.eq(0).transform("translate3d("+(m.isH?r:0)+"%, "+(m.isH?0:r)+"%, 0)").addClass("picker-calendar-month-prev")}if(m.params.onMonthAdd){m.params.onMonthAdd(m,p==="next"?m.months.eq(m.months.length-1)[0]:m.months.eq(0)[0])}m.animating=true;m.onMonthChangeStart(p);x=(m.monthsTranslate*100)*i;m.wrapper.transition(v).transform("translate3d("+(m.isH?x:0)+"%, "+(m.isH?0:x)+"%, 0)");if(w){m.wrapper.transitionEnd(function(){m.onMonthChangeEnd(p,true)})}if(!m.params.animate){m.onMonthChangeEnd(p)}};m.nextYear=function(){m.setYearMonth(m.currentYear+1)};m.prevYear=function(){m.setYearMonth(m.currentYear-1)};m.layout=function(){var v="";var u="";var q;var r=m.value&&m.value.length?m.value[0]:new Date().setHours(0,0,0,0);var w=m.monthHTML(r,"prev");var o=m.monthHTML(r);var t=m.monthHTML(r,"next");var s='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(w+o+t)+"</div></div>";var z="";if(m.params.weekHeader){for(q=0;q<7;q++){var y=(q+m.params.firstDay>6)?(q-7+m.params.firstDay):(q+m.params.firstDay);var p=m.params.dayNamesShort[y];z+='<div class="picker-calendar-week-day '+((m.params.weekendDays.indexOf(y)>=0)?"picker-calendar-week-day-weekend":"")+'"> '+p+"</div>"}z='<div class="picker-calendar-week-days">'+z+"</div>"}u="picker-modal picker-calendar "+(m.params.cssClass||"");var x=m.params.toolbar?m.params.toolbarTemplate.replace(/{{closeText}}/g,m.params.toolbarCloseText):"";if(m.params.toolbar){x=m.params.toolbarTemplate.replace(/{{closeText}}/g,m.params.toolbarCloseText).replace(/{{monthPicker}}/g,(m.params.monthPicker?m.params.monthPickerTemplate:"")).replace(/{{yearPicker}}/g,(m.params.yearPicker?m.params.yearPickerTemplate:""))}v='<div class="'+(u)+'">'+x+'<div class="picker-modal-inner">'+z+s+"</div></div>";m.pickerHTML=v};function l(o){o.preventDefault();if(m.opened){return}m.open();if(m.params.scrollToInput&&!j()){var t=m.input.parents(".page-content");if(t.length===0){return}var s=parseInt(t.css("padding-top"),10),r=parseInt(t.css("padding-bottom"),10),u=t[0].offsetHeight-s-m.container.height(),v=t[0].scrollHeight-s-m.container.height(),q;var p=m.input.offset().top-s+m.input[0].offsetHeight;if(p>u){var w=t.scrollTop()+p-u;if(w+u>v){q=w+u-v+r;if(u===v){q=m.container.height()}t.css({"padding-bottom":(q)+"px"})}t.scrollTop(w,300)}}}function e(o){if(h()){return}if(m.input&&m.input.length>0){if(o.target!==m.input[0]&&a(o.target).parents(".picker-modal").length===0){m.close()}}else{if(a(o.target).parents(".picker-modal").length===0){m.close()}}}if(m.params.input){m.input=a(m.params.input);if(m.input.length>0){if(m.params.inputReadOnly){m.input.prop("readOnly",true)}if(!m.inline){m.input.on("click",function(o){l(o);if(m.params.inputReadOnly){this.focus();this.blur()}})}if(m.params.inputReadOnly){m.input.on("focus mousedown",function(o){o.preventDefault()})}}}if(!m.inline){a("html").on("click",e)}function k(){m.opened=false;if(m.input&&m.input.length>0){m.input.parents(".page-content").css({"padding-bottom":""})}if(m.params.onClose){m.params.onClose(m)}m.destroyCalendarEvents()}m.opened=false;m.open=function(){var o=j();var p=false;if(!m.opened){if(!m.value){if(m.params.value){m.value=m.params.value;p=true}}m.layout();if(o){m.pickerHTML='<div class="popover popover-picker-calendar"><div class="popover-inner">'+m.pickerHTML+"</div></div>";m.popover=a.popover(m.pickerHTML,m.params.input,true);m.container=a(m.popover).find(".picker-modal");a(m.popover).on("close",function(){k()})}else{if(m.inline){m.container=a(m.pickerHTML);m.container.addClass("picker-modal-inline");a(m.params.container).append(m.container)}else{m.container=a(a.pickerModal(m.pickerHTML));a(m.container).on("close",function(){k()})}}m.container[0].f7Calendar=m;m.wrapper=m.container.find(".picker-calendar-months-wrapper");m.months=m.wrapper.find(".picker-calendar-month");m.updateCurrentMonthYear();m.monthsTranslate=0;m.setMonthsTranslate();m.initCalendarEvents();if(p){m.updateValue()}}m.opened=true;m.initialized=true;if(m.params.onMonthAdd){m.months.each(function(){m.params.onMonthAdd(m,this)})}if(m.params.onOpen){m.params.onOpen(m)}};m.close=function(){if(!m.opened||m.inline){return}if(h()){a.closeModal(m.popover);return}else{a.closeModal(m.container);return}};m.destroy=function(){m.close();if(m.params.input&&m.input.length>0){m.input.off("click focus",l)}a("html").off("click",e)};if(m.inline){m.open()}return m};a.fn.calendar=function(e){return this.each(function(){var f=a(this);if(!f[0]){return}var g=f.data("calendar");if(!g){var h={};if(f[0].tagName.toUpperCase()==="INPUT"){h.input=f}else{h.container=f}f.data("calendar",new b(a.extend(h,e)))}})};c=a.fn.calendar.prototype.defaults={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["日","一","二","三","四","五","六"],firstDay:1,weekendDays:[0,6],multiple:false,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:true,animate:true,closeOnSelect:true,monthPicker:true,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><div class="current-month-value"></div><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:true,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:true,scrollToInput:true,inputReadOnly:true,convertToPopover:true,onlyInPopover:false,toolbar:true,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>',};a.initCalendar=function(f){var e=f?a(f):a(document.body);e.find("[data-toggle='date']").each(function(){a(this).calendar()})}}($);+function(a){var b=function(l){var k=this;var e={updateValuesOnMomentum:false,updateValuesOnTouchmove:true,rotateEffect:false,momentumRatio:7,freeMode:false,scrollToInput:true,inputReadOnly:true,convertToPopover:true,onlyInPopover:false,toolbar:true,toolbarCloseText:"OK",toolbarTemplate:'<header class="bar bar-nav">            <button class="button button-link pull-right close-picker">OK</button>            <h1 class="title"></h1>            </header>',};l=l||{};for(var d in e){if(typeof l[d]==="undefined"){l[d]=e[d]}}k.params=l;k.cols=[];k.initialized=false;k.inline=k.params.container?true:false;var j=a.device.ios||(navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0)&&!a.device.android;function g(){var n=false;if(!k.params.convertToPopover&&!k.params.onlyInPopover){return n}if(!k.inline&&k.params.input){if(k.params.onlyInPopover){n=true}else{if(a.device.ios){n=a.device.ipad?true:false}else{if(a(window).width()>=768){n=true}}}}return n}function f(){if(k.opened&&k.container&&k.container.length>0&&k.container.parents(".popover").length>0){return true}else{return false}}k.setValue=function(n,p){var q=0;for(var o=0;o<k.cols.length;o++){if(k.cols[o]&&!k.cols[o].divider){k.cols[o].setValue(n[q],p);q++}}};k.updateValue=function(){var p=[];var o=[];for(var n=0;n<k.cols.length;n++){if(!k.cols[n].divider){p.push(k.cols[n].value);o.push(k.cols[n].displayValue)}}if(p.indexOf(undefined)>=0){return}k.value=p;k.displayValue=o;if(k.params.onChange){k.params.onChange(k,k.value,k.displayValue)}if(k.input&&k.input.length>0){a(k.input).val(k.params.formatValue?k.params.formatValue(k,k.value,k.displayValue):k.value.join(" "));a(k.input).trigger("change")}};k.initPickerCol=function(s,P){var r=a(s);var t=r.index();var q=k.cols[t];if(q.divider){return}q.container=r;q.wrapper=q.container.find(".picker-items-col-wrapper");q.items=q.wrapper.find(".picker-item");var z,E;var S,C,D,G,F;q.replaceValues=function(V,T){q.destroyEvents();q.values=V;q.displayValues=T;var U=k.columnHTML(q,true);q.wrapper.html(U);q.items=q.wrapper.find(".picker-item");q.calcSize();q.setValue(q.values[0],0,true);q.initEvents()};q.calcSize=function(){if(k.params.rotateEffect){q.container.removeClass("picker-items-col-absolute");if(!q.width){q.container.css({width:""})}}var U,T;U=0;T=q.container[0].offsetHeight;S=q.wrapper[0].offsetHeight;C=q.items[0].offsetHeight;D=C*q.items.length;G=T/2-D+C/2;F=T/2-C/2;if(q.width){U=q.width;if(parseInt(U,10)===U){U=U+"px"}q.container.css({width:U})}if(k.params.rotateEffect){if(!q.width){q.items.each(function(){var V=a(this);V.css({width:"auto"});U=Math.max(U,V[0].offsetWidth);V.css({width:""})});q.container.css({width:(U+2)+"px"})}q.container.addClass("picker-items-col-absolute")}};q.calcSize();q.wrapper.transform("translate3d(0,"+F+"px,0)").transition(0);var n=0;var p;q.setValue=function(V,W,X){if(typeof W==="undefined"){W=""}var T=q.wrapper.find('.picker-item[data-picker-value="'+V+'"]').index();if(typeof T==="undefined"||T===-1){return}var U=-T*C+F;q.wrapper.transition(W);q.wrapper.transform("translate3d(0,"+(U)+"px,0)");if(k.params.updateValuesOnMomentum&&q.activeIndex&&q.activeIndex!==T){a.cancelAnimationFrame(p);q.wrapper.transitionEnd(function(){a.cancelAnimationFrame(p)});O()}q.updateItems(T,U,W,X)};q.updateItems=function(T,Y,X,Z){if(typeof Y==="undefined"){Y=a.getTranslate(q.wrapper[0],"y")}if(typeof T==="undefined"){T=-Math.round((Y-F)/C)}if(T<0){T=0}if(T>=q.items.length){T=q.items.length-1}var V=q.activeIndex;q.activeIndex=T;q.wrapper.find(".picker-selected").removeClass("picker-selected");if(k.params.rotateEffect){q.items.transition(X)}var W=q.items.eq(T).addClass("picker-selected").transform("");if(Z||typeof Z==="undefined"){q.value=W.attr("data-picker-value");q.displayValue=q.displayValues?q.displayValues[T]:q.value;if(V!==T){if(q.onChange){q.onChange(k,q.value,q.displayValue)}k.updateValue()}}if(!k.params.rotateEffect){return}var U=(Y-(Math.floor((Y-F)/C)*C+F))/C;q.items.each(function(){var ab=a(this);var ad=ab.index()*C;var ag=F-Y;var ac=ad-ag;var af=ac/C;var ae=Math.ceil(q.height/C/2)+1;var aa=(-18*af);if(aa>180){aa=180}if(aa<-180){aa=-180}if(Math.abs(af)>ae){ab.addClass("picker-item-far")}else{ab.removeClass("picker-item-far")}ab.transform("translate3d(0, "+(-Y+F)+"px, "+(j?-110:0)+"px) rotateX("+aa+"deg)")})};function O(){p=a.requestAnimationFrame(function(){q.updateItems(undefined,undefined,0);O()})}if(P){q.updateItems(0,F,0)}var o=true;var B,A,N,K,M,L,J,I,u,H,R,Q;function y(T){if(A||B){return}T.preventDefault();B=true;var U=a.getTouchPosition(T);N=K=U.y;M=(new Date()).getTime();o=true;J=u=a.getTranslate(q.wrapper[0],"y")}function x(U){if(!B){return}U.preventDefault();o=false;var V=a.getTouchPosition(U);K=V.y;if(!A){a.cancelAnimationFrame(p);A=true;J=u=a.getTranslate(q.wrapper[0],"y");q.wrapper.transition(0)}U.preventDefault();var T=K-N;u=J+T;I=undefined;if(u<G){u=G-Math.pow(G-u,0.8);I="min"}if(u>F){u=F+Math.pow(u-F,0.8);I="max"}q.wrapper.transform("translate3d(0,"+u+"px,0)");q.updateItems(undefined,u,0,k.params.updateValuesOnTouchmove);R=u-H||u;Q=(new Date()).getTime();H=u}function w(U){if(!B||!A){B=A=false;return}B=A=false;q.wrapper.transition("");if(I){if(I==="min"){q.wrapper.transform("translate3d(0,"+G+"px,0)")}else{q.wrapper.transform("translate3d(0,"+F+"px,0)")}}L=new Date().getTime();var W,V;if(L-M>300){V=u}else{W=Math.abs(R/(L-Q));V=u+R*k.params.momentumRatio}V=Math.max(Math.min(V,F),G);var T=-Math.floor((V-F)/C);if(!k.params.freeMode){V=-T*C+F}q.wrapper.transform("translate3d(0,"+(parseInt(V,10))+"px,0)");q.updateItems(T,V,"",true);if(k.params.updateValuesOnMomentum){O();q.wrapper.transitionEnd(function(){a.cancelAnimationFrame(p)})}setTimeout(function(){o=true},100)}function v(T){if(!o){return}a.cancelAnimationFrame(p);var U=a(this).attr("data-picker-value");q.setValue(U)}q.initEvents=function(T){var U=T?"off":"on";q.container[U](a.touchEvents.start,y);q.container[U](a.touchEvents.move,x);q.container[U](a.touchEvents.end,w);q.items[U]("click",v)};q.destroyEvents=function(){q.initEvents(true)};q.container[0].f7DestroyPickerCol=function(){q.destroyEvents()};q.initEvents()};k.destroyPickerCol=function(n){n=a(n);if("f7DestroyPickerCol" in n[0]){n[0].f7DestroyPickerCol()}};function m(){if(!k.opened){return}for(var n=0;n<k.cols.length;n++){if(!k.cols[n].divider){k.cols[n].calcSize();k.cols[n].setValue(k.cols[n].value,0,false)}}}a(window).on("resize",m);k.columnHTML=function(n,r){var p="";var o="";if(n.divider){o+='<div class="picker-items-col picker-items-col-divider '+(n.textAlign?"picker-items-col-"+n.textAlign:"")+" "+(n.cssClass||"")+'">'+n.content+"</div>"}else{for(var q=0;q<n.values.length;q++){p+='<div class="picker-item" data-picker-value="'+n.values[q]+'">'+(n.displayValues?n.displayValues[q]:n.values[q])+"</div>"}o+='<div class="picker-items-col '+(n.textAlign?"picker-items-col-"+n.textAlign:"")+" "+(n.cssClass||"")+'"><div class="picker-items-col-wrapper">'+p+"</div></div>"}return r?p:o};k.layout=function(){var r="";var q="";var p;k.cols=[];var o="";for(p=0;p<k.params.cols.length;p++){var n=k.params.cols[p];o+=k.columnHTML(k.params.cols[p]);k.cols.push(n)}q="picker-modal picker-columns "+(k.params.cssClass||"")+(k.params.rotateEffect?" picker-3d":"");r='<div class="'+(q)+'">'+(k.params.toolbar?k.params.toolbarTemplate.replace(/{{closeText}}/g,k.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+o+'<div class="picker-center-highlight"></div></div></div>';k.pickerHTML=r};function i(n){n.preventDefault();if(k.opened){return}k.open();if(k.params.scrollToInput&&!g()){var s=k.input.parents(".content");if(s.length===0){return}var r=parseInt(s.css("padding-top"),10),q=parseInt(s.css("padding-bottom"),10),t=s[0].offsetHeight-r-k.container.height(),u=s[0].scrollHeight-r-k.container.height(),p;var o=k.input.offset().top-r+k.input[0].offsetHeight;if(o>t){var v=s.scrollTop()+o-t;if(v+t>u){p=v+t-u+q;if(t===u){p=k.container.height()}s.css({"padding-bottom":(p)+"px"})}s.scrollTop(v,300)}}}function c(n){if(f()){return}if(k.input&&k.input.length>0){if(n.target!==k.input[0]&&a(n.target).parents(".picker-modal").length===0){k.close()}}else{if(a(n.target).parents(".picker-modal").length===0){k.close()}}}if(k.params.input){k.input=a(k.params.input);if(k.input.length>0){if(k.params.inputReadOnly){k.input.prop("readOnly",true)}if(!k.inline){k.input.on("click",function(n){i(n);if(k.params.inputReadOnly){this.focus();this.blur()}})}if(k.params.inputReadOnly){k.input.on("focus mousedown",function(n){n.preventDefault()})}}}if(!k.inline){a("html").on("click",c)}function h(){k.opened=false;if(k.input&&k.input.length>0){k.input.parents(".page-content").css({"padding-bottom":""})}if(k.params.onClose){k.params.onClose(k)}k.container.find(".picker-items-col").each(function(){k.destroyPickerCol(this)})}k.opened=false;k.open=function(){var n=g();if(!k.opened){k.layout();if(n){k.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+k.pickerHTML+"</div></div>";k.popover=a.popover(k.pickerHTML,k.params.input,true);k.container=a(k.popover).find(".picker-modal");a(k.popover).on("close",function(){h()})}else{if(k.inline){k.container=a(k.pickerHTML);k.container.addClass("picker-modal-inline");a(k.params.container).append(k.container)}else{k.container=a(a.pickerModal(k.pickerHTML));a(k.container).on("close",function(){h()})}}k.container[0].f7Picker=k;k.container.find(".picker-items-col").each(function(){var o=true;if((!k.initialized&&k.params.value)||(k.initialized&&k.value)){o=false}k.initPickerCol(this,o)});if(!k.initialized){if(k.params.value){k.setValue(k.params.value,0)}}else{if(k.value){k.setValue(k.value,0)}}}k.opened=true;k.initialized=true;if(k.params.onOpen){k.params.onOpen(k)}};k.close=function(){if(!k.opened||k.inline){return}if(f()){a.closeModal(k.popover);return}else{a.closeModal(k.container);return}};k.destroy=function(){k.close();if(k.params.input&&k.input.length>0){k.input.off("click focus",i)}a("html").off("click",c);a(window).off("resize",m)};if(k.inline){k.open()}return k};a(document).on("click",".close-picker",function(){var c=a(".picker-modal.modal-in");if(c.length>0){a.closeModal(c)}else{c=a(".popover.modal-in .picker-modal");if(c.length>0){a.closeModal(c.parents(".popover"))}}});a(document).on(a.touchEvents.move,".picker-modal-inner",function(c){c.preventDefault()});a.fn.picker=function(d){var c=arguments;return this.each(function(){if(!this){return}var e=a(this);var h=e.data("picker");if(!h){d=d||{};var f=e.val();if(d.value===undefined&&f!==""){d.value=d.cols.length>1?f.split(" "):[f]}var g=a.extend({input:this},d);h=new b(g);e.data("picker",h)}if(typeof d===typeof"a"){h[d].apply(h,Array.prototype.slice.call(c,1))}})}}($);+function(a){a.fn.datetimePicker=function(b){return this.each(function(){if(!this){return}var k=new Date();var e=function(n){var l=[];for(var m=1;m<=(n||31);m++){l.push(m<10?"0"+m:m)}return l};var f=function(n,o){var m=new Date(o,parseInt(n)+1-1,1);var l=new Date(m-1);return e(l.getDate())};var d=function(l){return l<10?"0"+l:l};var g=("01 02 03 04 05 06 07 08 09 10 11 12").split(" ");var h=(function(){var l=[];for(var m=1950;m<=2030;m++){l.push(m)}return l})();var c={rotateEffect:false,value:[k.getFullYear(),d(k.getMonth()+1),k.getDate(),d(k.getHours()),d(k.getMinutes())],onChange:function(o,p,n){var m=f(o.cols[1].value,o.cols[0].value);var l=o.cols[2].value;if(l>m.length){l=m.length}o.cols[2].setValue(l)},formatValue:function(m,n,l){return l[0]+"-"+n[1]+"-"+n[2]+" "+n[3]+":"+n[4]},cols:[{values:h},{values:g},{values:e()},{divider:true,content:"  "},{values:(function(){var l=[];for(var m=0;m<=23;m++){l.push(d(m))}return l})(),},{divider:true,content:":"},{values:(function(){var l=[];for(var m=0;m<=59;m++){l.push(d(m))}return l})(),}]};b=b||{};var i=a(this).val();if(b.value===undefined&&i!==""){b.value=[].concat(i.split(" ")[0].split("-"),i.split(" ")[1].split(":"))}var j=a.extend(c,b);a(this).picker(j)})}}($);+function(a){a.initPullToRefresh=function(l){var e=a(l);if(!e.hasClass("pull-to-refresh-content")){e=e.find(".pull-to-refresh-content")}if(!e||e.length===0){return}var k,i,q={},j,p,r,b,m=false,u=false,o=0,s,n,v,t,d;b=e;if(b.attr("data-ptr-distance")){d=true}else{t=44}function h(w){if(k){if(a.os.android){if("targetTouches" in w&&w.targetTouches.length>1){return}}else{return}}i=false;k=true;j=undefined;v=undefined;var x=a.getTouchPosition(w);q.x=x.x;q.y=x.y;r=(new Date()).getTime();b=a(this)}function g(w){if(!k){return}var z=a.getTouchPosition(w);var x=z.x;var y=z.y;if(typeof j==="undefined"){j=!!(j||Math.abs(y-q.y)>Math.abs(x-q.x))}if(!j){k=false;return}n=b[0].scrollTop;if(typeof v==="undefined"&&n!==0){v=true}if(!i){b.removeClass("transitioning");if(n>b[0].offsetHeight){k=false;return}if(d){t=b.attr("data-ptr-distance");if(t.indexOf("%")>=0){t=b[0].offsetHeight*parseInt(t,10)/100}}o=b.hasClass("refreshing")?t:0;if(b[0].scrollHeight===b[0].offsetHeight||!a.os.ios){u=true}else{u=false}u=true}i=true;p=y-q.y;if(p>0&&n<=0||n<0){if(a.os.ios&&parseInt(a.os.version.split(".")[0],10)>7&&n===0&&!v){u=true}if(u){w.preventDefault();s=(Math.pow(p,0.85)+o);b.transform("translate3d(0,"+s+"px,0)")}else{}if((u&&Math.pow(p,0.85)>t)||(!u&&p>=t*2)){m=true;b.addClass("pull-up").removeClass("pull-down")}else{m=false;b.removeClass("pull-up").addClass("pull-down")}}else{b.removeClass("pull-up pull-down");m=false;return}}function f(){if(!k||!i){k=false;i=false;return}if(s){b.addClass("transitioning");s=0}b.transform("");if(m){b.addClass("refreshing");b.trigger("refresh",{done:function(){a.pullToRefreshDone(b)}})}else{b.removeClass("pull-down")}k=false;i=false}e.on(a.touchEvents.start,h);e.on(a.touchEvents.move,g);e.on(a.touchEvents.end,f);function c(){e.off(a.touchEvents.start,h);e.off(a.touchEvents.move,g);e.off(a.touchEvents.end,f)}e[0].destroyPullToRefresh=c};a.pullToRefreshDone=function(b){b=a(b);if(b.length===0){b=a(".pull-to-refresh-content.refreshing")}b.removeClass("refreshing").addClass("transitioning");b.transitionEnd(function(){b.removeClass("transitioning pull-up pull-down")})};a.pullToRefreshTrigger=function(b){b=a(b);if(b.length===0){b=a(".pull-to-refresh-content")}if(b.hasClass("refreshing")){return}b.addClass("transitioning refreshing");b.trigger("refresh",{done:function(){a.pullToRefreshDone(b)}})};a.destroyPullToRefresh=function(b){b=a(b);var c=b.hasClass("pull-to-refresh-content")?b:b.find(".pull-to-refresh-content");if(c.length===0){return}if(c[0].destroyPullToRefresh){c[0].destroyPullToRefresh()}}}($);+function(a){function b(){var e=a(this);var h=e.scrollTop();var g=e.scrollHeight();var d=e[0].offsetHeight;var c=e[0].getAttribute("data-distance");var j=e.find(".virtual-list");var i;var f=e.hasClass("infinite-scroll-top");if(!c){c=50}if(typeof c==="string"&&c.indexOf("%")>=0){c=parseInt(c,10)/100*d}if(c>d){c=d}if(f){if(h<c){e.trigger("infinite")}}else{if(h+d>=g-c){if(j.length>0){i=j[0].f7VirtualList;if(i&&!i.reachEnd){return}}e.trigger("infinite")}}}a.attachInfiniteScroll=function(c){a(c).on("scroll",b)};a.detachInfiniteScroll=function(c){a(c).off("scroll",b)};a.initInfiniteScroll=function(e){e=a(e);var d=e.hasClass("infinite-scroll")?e:e.find(".infinite-scroll");if(d.length===0){return}a.attachInfiniteScroll(d);function c(){a.detachInfiniteScroll(d);e.off("pageBeforeRemove",c)}e.on("pageBeforeRemove",c)}}($);+function(a){var f,c,h,g,d,e;var k=function(l){var m=a.getTouchPosition(l);g=m;d=e=0;f.addClass("touching")};var j=function(l){if(!g){return false}l.preventDefault();l.stopPropagation();var m=a.getTouchPosition(l);d=m.x-g.x;e=m.y-g.y;if(e>0){e=Math.sqrt(e)}f.css("transform","translate3d(0, "+e+"px, 0)")};var i=function(){f.removeClass("touching");f.attr("style","");if(e<0&&(Math.abs(e)>f.height()*0.38)){a.closeNotification()}if(Math.abs(d)<=1&&Math.abs(e)<=1){f.trigger("noti-click")}g=false};var b=function(l){l.on(a.touchEvents.start,k);l.on(a.touchEvents.move,j);l.on(a.touchEvents.end,i)};a.notification=a.noti=function(l){l=a.extend({},c,l);f=a(".notification");if(!f[0]){f=a('<div class="notification"></div>').appendTo(document.body);b(f)}f.off("noti-click");if(l.onClick){f.on("noti-click",function(){l.onClick(l.data)})}f.html(a.t7.compile(l.tpl)(l));f.show();f.addClass("notification-in");f.data("params",l);var m=function(){if(h){clearTimeout(h);h=null}h=setTimeout(function(){if(f.hasClass("touching")){m()}else{a.closeNotification()}},l.time)};m()};a.closeNotification=function(){h&&clearTimeout(h);h=null;var l=a(".notification").removeClass("notification-in").transitionEnd(function(){a(this).remove()});if(l[0]){var m=a(".notification").data("params");if(m&&m.onClose){m.onClose(m.data)}}};c=a.noti.prototype.defaults={title:undefined,text:undefined,media:undefined,time:4000,onClick:undefined,onClose:undefined,data:undefined,tpl:'<div class="notification-inner">{{#if media}}<div class="notification-media">{{media}}</div>{{/if}}<div class="notification-content">{{#if title}}<div class="notification-title">{{title}}</div>{{/if}}{{#if text}}<div class="notification-text">{{text}}</div>{{/if}}</div><div class="notification-handle-bar"></div></div>'}}($);+function(a){var b=function(c){this.params=c;this.tpl=a.t7(this.params.indexListTemplate).compile()};b.prototype.render=function(c){this.list=a(c||".list");this.draw()};b.prototype.draw=function(){if(this.indexList){this.indexList.remove()}this.titles=this.list.find(this.params.titleSelector);var c=this.titles.map(function(d,e){return a(e).data("index")||a(e).text()}).toArray();this.indexList=a("<ul class='index-list-bar'></ul>").appendTo(this.list.parents(".page"));this.indexList.html(this.tpl({indexes:c}));this.indexList.on(a.touchEvents.start,a.proxy(this.touchStart,this));this.indexList.on(a.touchEvents.start+" "+a.touchEvents.move,a.proxy(this.touchMove,this));this.indexList.on(a.touchEvents.end,a.proxy(this.touchEnd,this));this.content=this.list.parents(".content")};b.prototype.touchStart=function(){this.pageOffsetTop=this.content.offset().top;this.touching=true};b.prototype.touchMove=function(c){if(!this.touching){return}c.preventDefault();var d=this.getElementOnTouch(a.getTouchPosition(c));if(!d){return}var f=this.titles.eq(d.data("index"));var g=f.parent().offset().top;var h=g-this.pageOffsetTop+this.content.scrollTop();this.content.scrollTop(h)};b.prototype.touchEnd=function(){this.touching=false};b.prototype.getElementOnTouch=function(c){var d=null;this.indexList.find("li").each(function(){if(d){return}var e=a(this);var f=e.offset();if(f.top<c.y&&f.top+e.outerHeight()>c.y){d=e}});return d};a.fn.indexList=function(c){return this.each(function(){if(!this){return}var e=a(this);var d=e.data("index");if(!d){c=a.extend({},a.fn.indexList.prototype.defaults,c);d=new b(c).render(e);e.data("index",d)}return d})};a.fn.indexList.prototype.defaults={titleSelector:".list-group-title",indexListTemplate:"{{#indexes}}<li data-index={{@index}}><strong>{{this}}</strong></li>{{/indexes}}"};a.initIndexList=function(d){var c=a(d);if(c.hasClass(".contacts-block")){c.indexList()}else{c.find(".contacts-block").indexList()}}}($);+function(a){a(function(){a(document).on("focus",".searchbar input",function(c){var b=a(c.target);b.parents(".searchbar").addClass("searchbar-active")});a(document).on("click",".searchbar-cancel",function(c){var b=a(c.target);b.parents(".searchbar").removeClass("searchbar-active")});a(document).on("blur",".searchbar input",function(c){var b=a(c.target);b.parents(".searchbar").removeClass("searchbar-active")})})}($);+function(a){a.allowPanelOpen=true;a.openPanel=function(f){if(!a.allowPanelOpen){return false}if(f==="left"||f==="right"){f=".panel-"+f}f=f?a(f):a(".panel").eq(0);var c=f.hasClass("panel-right")?"right":"left";if(f.length===0||f.hasClass("active")){return false}a.closePanel();a.allowPanelOpen=false;var d=f.hasClass("panel-reveal")?"reveal":"cover";f.css({display:"block"}).addClass("active");f.trigger("open");var b=f[0].clientLeft;var h=d==="reveal"?a(a.getCurrentPage()):f;var e=false;function g(){h.transitionEnd(function(i){if(i.target===h[0]){if(f.hasClass("active")){f.trigger("opened")}else{f.trigger("closed")}a.allowPanelOpen=true}else{g()}})}g();a(document.body).addClass("with-panel-"+c+"-"+d);return true};a.closePanel=function(){var b=a(".panel.active");if(b.length===0){return false}var c=b.hasClass("panel-reveal")?"reveal":"cover";var d=b.hasClass("panel-left")?"left":"right";b.removeClass("active");var e=c==="reveal"?a(".page"):b;b.trigger("close");a.allowPanelOpen=false;e.transitionEnd(function(){if(b.hasClass("active")){return}b.css({display:""});b.trigger("closed");a("body").removeClass("panel-closing");a.allowPanelOpen=true});a("body").addClass("panel-closing").removeClass("with-panel-"+d+"-"+c)};a(document).on("click",".open-panel",function(b){var c=a(b.target).data(c);a.openPanel(c)});a(document).on("click",".close-panel, .panel-overlay",function(b){a.closePanel()});a.initSwipePanels=function(){var l,o;var p=a.smConfig.swipePanel;var t=a.smConfig.swipePanelOnlyClose;var r=true;var q=false;var u=2;var s=false;if(!(p||t)){return}var m=a(".panel-overlay");var j,h,i,w={},x,v,y,k,n,d,c;var b=a(a.getCurrentPage());function g(z){b=a(a.getCurrentPage());if(!a.allowPanelOpen||(!p&&!t)||j){return}if(a(".modal-in, .photo-browser-in").length>0){return}if(!(r||t)){if(a(".panel.active").length>0&&!l.hasClass("active")){return}}var A=a.getTouchPosition(z);w.x=A.x;w.y=A.y;if(r||t){if(a(".panel.active").length>0){o=a(".panel.active").hasClass("panel-left")?"left":"right"}else{if(t){return}o=p}if(!o){return}}l=a(".panel.panel-"+o);if(!l[0]){return}k=l.hasClass("active");if(q&&!k){if(o==="left"){if(w.x>q){return}}if(o==="right"){if(w.x<window.innerWidth-q){return}}}h=false;j=true;i=undefined;x=(new Date()).getTime();c=undefined}function f(z){if(!j){return}if(!l[0]){return}if(z.f7PreventPanelSwipe){return}var C=a.getTouchPosition(z);var A=C.x;var B=C.y;if(typeof i==="undefined"){i=!!(i||Math.abs(B-w.y)>Math.abs(A-w.x))}if(i){j=false;return}if(!c){if(A>w.x){c="to-right"}else{c="to-left"}if(o==="left"&&(c==="to-left"&&!l.hasClass("active"))||o==="right"&&(c==="to-right"&&!l.hasClass("active"))){j=false;return}}if(s){var E=(new Date()).getTime()-x;if(E<300){if(c==="to-left"){if(o==="right"){a.openPanel(o)}if(o==="left"&&l.hasClass("active")){a.closePanel()}}if(c==="to-right"){if(o==="left"){a.openPanel(o)}if(o==="right"&&l.hasClass("active")){a.closePanel()}}}j=false;h=false;return}if(!h){d=l.hasClass("panel-cover")?"cover":"reveal";if(!k){l.show();m.show()}n=l[0].offsetWidth;l.transition(0)}h=true;z.preventDefault();var D=k?0:-u;if(o==="right"){D=-D}v=A-w.x+D;if(o==="right"){y=v-(k?n:0);if(y>0){y=0}if(y<-n){y=-n}}else{y=v+(k?n:0);if(y<0){y=0}if(y>n){y=n}}if(d==="reveal"){b.transform("translate3d("+y+"px,0,0)").transition(0);m.transform("translate3d("+y+"px,0,0)")}else{l.transform("translate3d("+y+"px,0,0)").transition(0)}}function e(A){if(!j||!h){j=false;h=false;return}j=false;h=false;var D=(new Date()).getTime()-x;var z;var B=(y===0||Math.abs(y)===n);if(!k){if(y===0){z="reset"}else{if(D<300&&Math.abs(y)>0||D>=300&&(Math.abs(y)>=n/2)){z="swap"}else{z="reset"}}}else{if(y===-n){z="reset"}else{if(D<300&&Math.abs(y)>=0||D>=300&&(Math.abs(y)<=n/2)){if(o==="left"&&y===n){z="reset"}else{z="swap"}}else{z="reset"}}}if(z==="swap"){a.allowPanelOpen=true;if(k){a.closePanel();if(B){l.css({display:""});a("body").removeClass("panel-closing")}}else{a.openPanel(o)}if(B){a.allowPanelOpen=true}}if(z==="reset"){if(k){a.allowPanelOpen=true;a.openPanel(o)}else{a.closePanel();if(B){a.allowPanelOpen=true;l.css({display:""})}else{var C=d==="reveal"?b:l;a("body").addClass("panel-closing");C.transitionEnd(function(){a.allowPanelOpen=true;l.css({display:""});a("body").removeClass("panel-closing")})}}}if(d==="reveal"){b.transition("");b.transform("")}l.transition("").transform("");m.css({display:""}).transform("")}a(document).on(a.touchEvents.start,g);a(document).on(a.touchEvents.move,f);a(document).on(a.touchEvents.end,e)};a.initSwipePanels()}($);+function(a){if(!window.CustomEvent){window.CustomEvent=function(f,c){var d=document.createEvent("CustomEvent");d.initCustomEvent(f,c.bubbles,c.cancelable,c.detail,c.id);return d}}var b=function(){this.state=sessionStorage;this.state.setItem("stateid",parseInt(this.state.getItem("stateid")||1)+1);this.state.setItem("currentStateID",this.state.getItem("stateid"));this.stack=sessionStorage;this.stack.setItem("back","[]");this.stack.setItem("forward","[]");this.extras={};this.init();this.xhr=null};b.prototype.defaults={transition:true};b.prototype.init=function(){var c=this.getCurrentPage();if(!c[0]){c=a(".page").eq(0).addClass("page-current")}var d=location.hash;if(c[0]&&!c[0].id){c[0].id=(d?d.slice(1):this.genRandomID())}if(!c[0]){throw new Error("can't find .page element")}var f=a(d);if(f[0]&&(!c[0]||d.slice(1)!==c[0].id)){c.removeClass("page-current");f.addClass("page-current");c=f}var h=history.state;if(!h){var e=this.genStateID();this.replaceState(location.href,e);this.setCurrentStateID(e)}var g=this;window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",a.proxy(g.onpopstate,g))},0)},false)};b.prototype.loadPage=function(g,c,f,e){var d=g;if(c===undefined){c=!this.defaults.transition}if(typeof g===typeof"a"){d={url:g,noAnimation:c,replace:f}}var g=d.url,c=d.noAnimation,f=d.replace;this.getPage(g,function(p,l){var j=this.getCurrentPage();var q=j[0].id;var h="pushBack";if(f){h="replaceBack"}if(e){h="reloadBack"}this[h]({url:location.href,pageid:"#"+q,id:this.getCurrentStateID(),animation:!c});var m=JSON.parse(this.state.getItem("forward")||"[]");var r=this;for(var n=0;n<m.length;n++){a(m[n].pageid).each(function(){var i=a(this);if(i.data("page-remote")){var s=r.extras[i[0].id];s&&s.remove();r.extras[i[0].id]=undefined;i.remove()}})}this.state.setItem("forward","[]");var k=a("#"+a(p)[0].id);p.insertBefore(a(".page")[0]);if(k[0]!==p[0]){k.remove()}if(l){r.extras[p[0].id]=l.appendTo(document.body)}var o=this.genStateID();this.setCurrentStateID(o);this[f||e?"replaceState":"pushState"](g,o);this.forwardStack=[];this.animatePages(this.getCurrentPage(),p,null,c)})};b.prototype.replacePage=function(d,c){return this.loadPage(d,c,true)};b.prototype.reloadPage=function(){return this.loadPage(location.href,true,false,true)};b.prototype.animatePages=function(d,h,e,f){var g="page-left page-right page-from-center-to-left page-from-center-to-right page-from-right-to-center page-from-left-to-center";if(f){if(!e){h.trigger("pageAnimationStart",[h[0].id,h]);d.removeClass(g).removeClass("page-current");h.removeClass(g).addClass("page-current");h.trigger("pageInitInternal",[h[0].id,h]);if(h.hasClass("no-tabbar")){a(document.body).addClass("tabbar-hidden")}else{a(document.body).removeClass("tabbar-hidden")}}else{d.trigger("pageAnimationStart",[h[0].id,h]);h.removeClass(g).removeClass("page-current");d.removeClass(g).addClass("page-current");if(d.hasClass("no-tabbar")){a(document.body).addClass("tabbar-hidden")}else{a(document.body).removeClass("tabbar-hidden")}h.trigger("pageInitInternal",[d[0].id,d])}}else{if(!e){h.trigger("pageAnimationStart",[h[0].id,h]);d.removeClass(g).addClass("page-from-center-to-left").removeClass("page-current");h.removeClass(g).addClass("page-from-right-to-center page-current");d.animationEnd(function(){d.removeClass(g)});h.animationEnd(function(){c(h)});if(h.hasClass("no-tabbar")){a(document.body).addClass("tabbar-hidden")}else{a(document.body).removeClass("tabbar-hidden")}h.trigger("pageInitInternal",[h[0].id,h])}else{d.trigger("pageAnimationStart",[h[0].id,h]);h.removeClass(g).addClass("page-from-center-to-right").removeClass("page-current");d.removeClass(g).addClass("page-from-left-to-center page-current");d.animationEnd(function(){c(d)});h.animationEnd(function(){h.removeClass(g)});if(d.hasClass("no-tabbar")){a(document.body).addClass("tabbar-hidden")}else{a(document.body).removeClass("tabbar-hidden")}h.trigger("pageInitInternal",[d[0].id,d])}}function c(i){i.removeClass(g);i.trigger("pageAnimationEnd",[i[0].id,i])}};b.prototype.getCurrentPage=function(){return a(".page-current")};b.prototype.forward=function(d){var c=JSON.parse(this.stack.getItem("forward"));if(c.length){history.forward()}else{location.href=d}};b.prototype.back=function(d){var c=JSON.parse(this.stack.getItem("back"));if(c.length){history.back()}else{if(d){location.href=d}else{history.back()}}};b.prototype._back=function(){var d=this.popBack();if(!d){return}var c=this.getCurrentPage();var e=a(d.pageid);if(!e[0]){return}this.pushForward({url:location.href,pageid:"#"+c[0].id,id:this.getCurrentStateID(),animation:d.animation});this.setCurrentStateID(d.id);this.animatePages(e,c,true,!d.animation)};b.prototype._forward=function(){var d=this.popForward();if(!d){return}var c=this.getCurrentPage();var e=a(d.pageid);if(!e[0]){return}this.pushBack({url:location.href,pageid:"#"+c[0].id,id:this.getCurrentStateID(),animation:d.animation});this.setCurrentStateID(d.id);this.animatePages(c,e,false,!d.animation)};b.prototype.pushState=function(d,c){history.pushState({url:d,id:c},"",d)};b.prototype.replaceState=function(d,c){history.replaceState({url:d,id:c},"",d)};b.prototype.onpopstate=function(c){var f=c.state;if(!f){return true}if(f.id===this.getCurrentStateID()){return false}var e=f.id>this.getCurrentStateID();if(e){this._forward()}else{this._back()}};b.prototype.getPage=function(e,c){if(e[0]==="#"){return c.apply(this,[a(e)])}this.dispatch("pageLoadStart");if(this.xhr&&this.xhr.readyState<4){this.xhr.onreadystatechange=a.noop;this.xhr.abort();this.dispatch("pageLoadCancel")}var d=this;this.xhr=a.ajax({url:e,success:a.proxy(function(h,j,k){var i=this.parseXHR(k);var g=i[0];var f=i[1];if(!g[0].id){g[0].id=this.genRandomID()}g.data("page-remote",1);c.apply(this,[g,f])},this),error:function(){d.dispatch("pageLoadError")},complete:function(){d.dispatch("pageLoadComplete")}})};b.prototype.parseXHR=function(i){var g=i.responseText;var e=g.match(/<body[^>]*>([\s\S.]*)<\/body>/i);var f=e?e[1]:g;f="<div>"+f+"</div>";var h=a(f);var c=h.find(".popup, .popover, .panel, .panel-overlay");var d=h.find(".page");if(!d[0]){d=h.addClass("page")}return[d,c]};b.prototype.genStateID=function(){var c=parseInt(this.state.getItem("stateid"))+1;this.state.setItem("stateid",c);return c};b.prototype.getCurrentStateID=function(){return parseInt(this.state.getItem("currentStateID"))};b.prototype.setCurrentStateID=function(c){this.state.setItem("currentStateID",c)};b.prototype.genRandomID=function(){return"page-"+(+new Date())};b.prototype.popBack=function(){var d=JSON.parse(this.stack.getItem("back"));if(!d.length){return null}var c=d.splice(d.length-1,1)[0];this.stack.setItem("back",JSON.stringify(d));return c};b.prototype.pushBack=function(c){var d=JSON.parse(this.stack.getItem("back"));d.push(c);this.stack.setItem("back",JSON.stringify(d))};b.prototype.replaceBack=function(c){var d=JSON.parse(this.stack.getItem("back"));d.pop();d.push(c);this.stack.setItem("back",JSON.stringify(d))};b.prototype.reloadBack=function(c){return};b.prototype.popForward=function(){var d=JSON.parse(this.stack.getItem("forward"));if(!d.length){return null}var c=d.splice(d.length-1,1)[0];this.stack.setItem("forward",JSON.stringify(d));return c};b.prototype.pushForward=function(c){var d=JSON.parse(this.stack.getItem("forward"));d.push(c);this.stack.setItem("forward",JSON.stringify(d))};b.prototype.dispatch=function(d){var c=new CustomEvent(d,{bubbles:true,cancelable:true});window.dispatchEvent(c)};a(function(){if(!a.smConfig.router){return}var c=a.router=new b();c.defaults=b.prototype.defaults;a(document).on("click","a",function(f){var d=a(f.currentTarget);if(d.hasClass("external")||d[0].hasAttribute("external")||d.hasClass("tab-link")||d.hasClass("open-popup")||d.hasClass("open-panel")){return}f.preventDefault();var g=d.attr("href");if(d.hasClass("back")){c.back(g);return}if(!g||g==="#"||/javascript:.*;/.test(g)){return}c.loadPage(g,d.hasClass("no-transition")?true:undefined,d.hasClass("replace")?true:undefined)})})}($);+function(a){var b=function(){var c=a(".page-current");if(!c[0]){c=a(".page").addClass("page-current")}return c};a.initPage=function(e){var d=e?a(e):b();if(!d[0]){d=a(document.body)}var c=d.hasClass("content")?d:d.find(".content");a.initPullToRefresh(c);a.initInfiniteScroll(c);a.initCalendar(c);a.initIndexList(c);if(a.initSwiper){a.initSwiper(c)}if(a.initSwipeout){a.initSwipeout()}};if(a.smConfig.showPageLoadingIndicator){a(window).on("pageLoadStart",function(){a.showIndicator()});a(document).on("pageAnimationStart",function(){a.hideIndicator()});a(window).on("pageLoadCancel",function(){a.hideIndicator()});a(window).on("pageLoadError",function(){a.hideIndicator();a.toast("加载失败")})}a.init=function(){var c=b();var d=c[0].id;if(c.hasClass("page-inited")){c.trigger("pageReinit",[d,c])}else{a.initPage();c.addClass("page-inited");c.trigger("pageInit",[d,c])}};a(function(){if(a.smConfig.autoInit){a.init()}a(document).on("pageInitInternal",function(d,f,c){a.init()})})}($);